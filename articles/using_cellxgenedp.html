<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="cellxgenedp">
<title>Discover and download datasets and files from the cellxgene data portal • cellxgenedp</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Discover and download datasets and files from the cellxgene data portal">
<meta property="og:description" content="cellxgenedp">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">cellxgenedp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.7.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/using_cellxgenedp.html">Discover and download datasets and files from the cellxgene data portal</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mtmorgan/cellxgenedp/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Discover and download datasets and files from the cellxgene data portal</h1>
                        <h4 data-toc-skip class="author">Martin
Morgan</h4>
            <address class="author_afil">
      Roswell Park Comprehensive Cancer
Center<br><a class="author_email" href="mailto:#"></a><a href="mailto:Martin.Morgan@RoswellPark.org" class="email">Martin.Morgan@RoswellPark.org</a>
      </address>
                  
      
      <small class="dont-index">Source: <a href="https://github.com/mtmorgan/cellxgenedp/blob/HEAD/vignettes/using_cellxgenedp.Rmd" class="external-link"><code>vignettes/using_cellxgenedp.Rmd</code></a></small>
      <div class="d-none name"><code>using_cellxgenedp.Rmd</code></div>
    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      <p>The cellxgene data portal (<a href="https://cellxgene.cziscience.com/" class="external-link uri">https://cellxgene.cziscience.com/</a>) provides a
      graphical user interface to collections of single-cell sequence
      data processed in standard ways to ‘count matrix’ summaries. The
      cellxgenedp package provides an alternative, R-based inteface,
      allowing flexible data discovery, viewing, and downloading.</p>
    </div>
    
<p>NOTE: The interface to CELLxGENE has changed; versions of <a href="https://bioconductor.org/packages/cellxgenedp" class="external-link">cellxgenedp</a>
prior to 1.4.1 / 1.5.2 will cease to work when CELLxGENE removes the
previous interface. See the vignette section ‘API changes’ for
additional details.</p>
<div class="section level2">
<h2 id="installation-and-use">Installation and use<a class="anchor" aria-label="anchor" href="#installation-and-use"></a>
</h2>
<p>This package is available in <em>Bioconductor</em> version 3.15 and
later. The following code installs <a href="https://bioconductor.org/packages/cellxgenedp" class="external-link">cellxgenedp</a> as
well as other packages required for this vignette.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cellxgenedp"</span>, <span class="st">"zellkonverter"</span>, <span class="st">"SingleCellExperiment"</span>, <span class="st">"HDF5Array"</span><span class="op">)</span></span>
<span><span class="va">required_pkgs</span> <span class="op">&lt;-</span> <span class="va">pkgs</span><span class="op">[</span><span class="op">!</span><span class="va">pkgs</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://bioconductor.github.io/BiocManager/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="va">required_pkgs</span><span class="op">)</span></span></code></pre></div>
<p>Use the following <code>pkgs</code> vector to install from GitHub
(latest, unchecked, development version) instead</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"mtmorgan/cellxgenedp"</span>, <span class="st">"zellkonverter"</span>, <span class="st">"SingleCellExperiment"</span>, <span class="st">"HDF5Array"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Load the package into your current <em>R</em> session. We make
extensive use of the dplyr packages, and at the end of the vignette use
SingleCellExperiment and zellkonverter, so load those as well.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/theislab/zellkonverter" class="external-link">zellkonverter</a></span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">SingleCellExperiment</span><span class="op">)</span> <span class="co"># load early to avoid masking dplyr::count()</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mtmorgan.github.io/cellxgenedp/">cellxgenedp</a></span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="cxg-provides-a-shiny-interface">
<code>cxg()</code> Provides a ‘shiny’ interface<a class="anchor" aria-label="anchor" href="#cxg-provides-a-shiny-interface"></a>
</h2>
<p>The following sections outline how to use the <a href="https://bioconductor.org/packages/cellxgenedp" class="external-link">cellxgenedp</a>
package in an <em>R</em> script; most functionality is also available in
the <code><a href="../reference/cxg.html">cxg()</a></code> shiny application, providing an easy way to
identify, download, and visualize one or several datasets. Start the
app</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cxg.html">cxg</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>choose a project on the first tab, and a dataset for visualization,
or one or more datasets for download!</p>
</div>
<div class="section level2">
<h2 id="collections-datasets-and-files">Collections, datasets and files<a class="anchor" aria-label="anchor" href="#collections-datasets-and-files"></a>
</h2>
<p>Retrieve metadata about resources available at the cellxgene data
portal using <code><a href="../reference/db.html">db()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/db.html">db</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Printing the <code>db</code> object provides a brief overview of the
available data, as well as hints, in the form of functions like
<code><a href="../reference/query.html">collections()</a></code>, for further exploration.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db</span></span></code></pre></div>
<pre><code><span><span class="co">## cellxgene_db</span></span>
<span><span class="co">## number of collections(): 167</span></span>
<span><span class="co">## number of datasets(): 1125</span></span>
<span><span class="co">## number of files(): 2231</span></span></code></pre>
<p>The portal organizes data hierarchically, with ‘collections’
(research studies, approximately), ‘datasets’, and ‘files’. Discover
data using the corresponding functions.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/query.html">collections</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 167 × 18</span></span></span>
<span><span class="co">##    collection_id    collection_version_id collection_url consortia contact_email</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> 1ca90a2d-2943-4… db29f59d-b9b7-4636-8… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    edl@allenins…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> 10ec9198-584e-4… 42fcb56f-6402-4156-b… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    chenc6@email…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> 1b014f39-f202-4… 9b295017-aff1-47ad-8… https://cellx… <span style="color: #949494;">&lt;lgl [1]&gt;</span> kimberly.ald…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> 367d95c0-0eb0-4… 4216ddce-94c0-4fdc-9… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    edl@allenins…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> af893e86-8e9f-4… fc8a8009-02f0-4084-9… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    ruichen@bcm.…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> 48d354f5-a5ca-4… 54caf53d-0a4d-4874-9… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    Nathan.Salom…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> a3ffde6c-7ad2-4… 3dd06fe9-000e-4b73-b… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    aviv.regev.s…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> 13d1c580-4b17-4… c7b93415-bf09-45df-9… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    my4@sanger.a…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> fbc5881f-1ee3-4… 4f2da30d-407b-4c94-8… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    Douglas.Stra…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> 4f889ffc-d4bc-4… a6fbd6dc-4bf5-4b6a-9… https://cellx… <span style="color: #949494;">&lt;lgl [1]&gt;</span> kaistcbfg@gm…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 157 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 13 more variables: contact_name &lt;chr&gt;, curator_name &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   description &lt;chr&gt;, doi &lt;chr&gt;, links &lt;list&gt;, name &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   publisher_metadata &lt;list&gt;, revising_in &lt;lgl&gt;, revision_of &lt;lgl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   visibility &lt;chr&gt;, created_at &lt;date&gt;, published_at &lt;date&gt;, revised_at &lt;date&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/query.html">datasets</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1,125 × 25</span></span></span>
<span><span class="co">##    dataset_id   dataset_version_id collection_id donor_id assay  batch_condition</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> fc0ceb80-d2… d9e98068-b506-434… 1ca90a2d-294… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> f67f2cfa-ba… 3361dba5-7446-4e3… 1ca90a2d-294… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> eec3e37d-ed… 427e3253-c230-4d7… 1ca90a2d-294… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> e8ac3386-31… 75338c67-3e91-428… 1ca90a2d-294… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> de104f7e-14… 19cf2bd2-44ba-40a… 1ca90a2d-294… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> d87f3f91-dc… b8883057-f9b4-41e… 1ca90a2d-294… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> d2fc9880-e6… b0313650-ec3e-416… 1ca90a2d-294… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> d0ea3ec4-0f… 806eaf48-4832-42e… 1ca90a2d-294… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> c76098ba-ee… df8e241a-6cf8-43c… 1ca90a2d-294… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> c2876b1b-06… 60496f4c-5bcd-4ce… 1ca90a2d-294… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1,115 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 19 more variables: cell_count &lt;int&gt;, cell_type &lt;list&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   development_stage &lt;list&gt;, disease &lt;list&gt;, explorer_url &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   is_primary_data &lt;list&gt;, mean_genes_per_cell &lt;dbl&gt;, organism &lt;list&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   primary_cell_count &lt;int&gt;, schema_version &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   self_reported_ethnicity &lt;list&gt;, sex &lt;list&gt;, suspension_type &lt;list&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   tissue &lt;list&gt;, title &lt;chr&gt;, tombstone &lt;lgl&gt;, …</span></span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/query.html">files</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2,231 × 4</span></span></span>
<span><span class="co">##    dataset_id                             filesize filetype url                 </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> fc0ceb80-d2d9-47c1-9d78-b0e45c64c500   73<span style="text-decoration: underline;">375</span>840 H5AD     https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> fc0ceb80-d2d9-47c1-9d78-b0e45c64c500   58<span style="text-decoration: underline;">660</span>235 RDS      https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> f67f2cfa-ba45-4f77-8e26-64a15f666043  234<span style="text-decoration: underline;">660</span>104 H5AD     https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> f67f2cfa-ba45-4f77-8e26-64a15f666043  259<span style="text-decoration: underline;">116</span>909 RDS      https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> eec3e37d-ed41-4881-bc6e-aaf39a2c6eb0  866<span style="text-decoration: underline;">819</span>000 H5AD     https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> eec3e37d-ed41-4881-bc6e-aaf39a2c6eb0  925<span style="text-decoration: underline;">519</span>839 RDS      https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> e8ac3386-31d4-48ba-aa70-1bae0cf020e7  529<span style="text-decoration: underline;">089</span>281 H5AD     https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> e8ac3386-31d4-48ba-aa70-1bae0cf020e7  580<span style="text-decoration: underline;">572</span>471 RDS      https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> de104f7e-14fa-4795-bd19-b5ee2c1563e0 <span style="text-decoration: underline;">1</span>643<span style="text-decoration: underline;">894</span>191 H5AD     https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> de104f7e-14fa-4795-bd19-b5ee2c1563e0 <span style="text-decoration: underline;">2</span>157<span style="text-decoration: underline;">485</span>192 RDS      https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 2,221 more rows</span></span></span></code></pre>
<p>Each of these resources has a unique primary identifier (e.g.,
<code>file_id</code>) as well as an identifier describing the
relationship of the resource to other components of the database (e.g.,
<code>dataset_id</code>). These identifiers can be used to ‘join’
information across tables.</p>
<div class="section level3">
<h3 id="using-dplyr-to-navigate-data">Using <code>dplyr</code> to navigate data<a class="anchor" aria-label="anchor" href="#using-dplyr-to-navigate-data"></a>
</h3>
<p>A collection may have several datasets, and datasets may have several
files. For instance, here is the collection with the most datasets</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">collection_with_most_datasets</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="../reference/query.html">datasets</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">collection_id</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>We can find out about this collection by joining with the
<code><a href="../reference/query.html">collections()</a></code> table.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>    <span class="va">collection_with_most_datasets</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">collection_id</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/query.html">collections</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span>,</span>
<span>    by <span class="op">=</span> <span class="st">"collection_id"</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 1</span></span>
<span><span class="co">## Columns: 18</span></span>
<span><span class="co">## $ collection_id         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "283d65eb-dd53-496d-adb7-7570c7caa443"</span></span>
<span><span class="co">## $ collection_version_id <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "dd99dabe-f2cc-495a-be7a-972cc2f3bb66"</span></span>
<span><span class="co">## $ collection_url        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "https://cellxgene.cziscience.com/collections/28…</span></span>
<span><span class="co">## $ consortia             <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> ["BRAIN Initiative", "CZI Single-Cell Biology"]</span></span>
<span><span class="co">## $ contact_email         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "kimberly.siletti@ki.se"</span></span>
<span><span class="co">## $ contact_name          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Kimberly Siletti"</span></span>
<span><span class="co">## $ curator_name          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "James Chaffer"</span></span>
<span><span class="co">## $ description           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "First draft atlas of human brain transcriptomic…</span></span>
<span><span class="co">## $ doi                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "10.1126/science.add7046"</span></span>
<span><span class="co">## $ links                 <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> [["", "RAW_DATA", "http://data.nemoarchive.org/b…</span></span>
<span><span class="co">## $ name                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Human Brain Cell Atlas v1.0"</span></span>
<span><span class="co">## $ publisher_metadata    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> [[["Siletti", "Kimberly"], ["Hodge", "Rebecca"]…</span></span>
<span><span class="co">## $ revising_in           <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> NA</span></span>
<span><span class="co">## $ revision_of           <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> NA</span></span>
<span><span class="co">## $ visibility            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "PUBLIC"</span></span>
<span><span class="co">## $ created_at            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2023-10-23</span></span>
<span><span class="co">## $ published_at          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2022-12-09</span></span>
<span><span class="co">## $ revised_at            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2023-10-23</span></span></code></pre>
<p>We can take a similar strategy to identify all datasets belonging to
this collection</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>    <span class="va">collection_with_most_datasets</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">collection_id</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/query.html">datasets</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span>,</span>
<span>    by <span class="op">=</span> <span class="st">"collection_id"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 138 × 25</span></span></span>
<span><span class="co">##    collection_id   dataset_id dataset_version_id donor_id assay  batch_condition</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> 283d65eb-dd53-… ff7d15fa-… ad4f40b1-ad1b-43e… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> 283d65eb-dd53-… fe1a73ab-… ca8e9e3a-852f-487… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> 283d65eb-dd53-… fbf173f9-… 3cd2b19b-7bda-4ad… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> 283d65eb-dd53-… fa554686-… e05b2d3e-f9cb-460… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> 283d65eb-dd53-… f9034091-… 3c1f250d-f27e-49a… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> 283d65eb-dd53-… f8dda921-… de9cd660-638d-4b3… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> 283d65eb-dd53-… f7d003d4-… e50d1b65-4ad1-48b… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> 283d65eb-dd53-… f6d9f2ad-… a46aed38-e822-490… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> 283d65eb-dd53-… f5a04dff-… 1c90c2fe-8f62-47d… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> 283d65eb-dd53-… f502c312-… 166e3950-147b-4f4… <span style="color: #949494;">&lt;list&gt;</span>   <span style="color: #949494;">&lt;list&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 128 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 19 more variables: cell_count &lt;int&gt;, cell_type &lt;list&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   development_stage &lt;list&gt;, disease &lt;list&gt;, explorer_url &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   is_primary_data &lt;list&gt;, mean_genes_per_cell &lt;dbl&gt;, organism &lt;list&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   primary_cell_count &lt;int&gt;, schema_version &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   self_reported_ethnicity &lt;list&gt;, sex &lt;list&gt;, suspension_type &lt;list&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   tissue &lt;list&gt;, title &lt;chr&gt;, tombstone &lt;lgl&gt;, …</span></span></span></code></pre>
</div>
<div class="section level3">
<h3 id="facets-provides-information-on-levels-present-in-specific-columns">
<code>facets()</code> provides information on ‘levels’ present in
specific columns<a class="anchor" aria-label="anchor" href="#facets-provides-information-on-levels-present-in-specific-columns"></a>
</h3>
<p>Notice that some columns are ‘lists’ rather than atomic vectors like
‘character’ or ‘integer’.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/query.html">datasets</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html" class="external-link">where</a></span><span class="op">(</span><span class="va">is.list</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1,125 × 12</span></span></span>
<span><span class="co">##    donor_id    assay      batch_condition cell_type   development_stage disease</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> <span style="color: #949494;">&lt;list [79]&gt;</span> <span style="color: #949494;">&lt;list [2]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>      <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="color: #949494;">&lt;list [21]&gt;</span>       <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> <span style="color: #949494;">&lt;list [89]&gt;</span> <span style="color: #949494;">&lt;list [2]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>      <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="color: #949494;">&lt;list [24]&gt;</span>       <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> <span style="color: #949494;">&lt;list [89]&gt;</span> <span style="color: #949494;">&lt;list [2]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>      <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="color: #949494;">&lt;list [24]&gt;</span>       <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> <span style="color: #949494;">&lt;list [88]&gt;</span> <span style="color: #949494;">&lt;list [2]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>      <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="color: #949494;">&lt;list [24]&gt;</span>       <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> <span style="color: #949494;">&lt;list [89]&gt;</span> <span style="color: #949494;">&lt;list [2]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>      <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="color: #949494;">&lt;list [24]&gt;</span>       <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> <span style="color: #949494;">&lt;list [89]&gt;</span> <span style="color: #949494;">&lt;list [2]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>      <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="color: #949494;">&lt;list [24]&gt;</span>       <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> <span style="color: #949494;">&lt;list [89]&gt;</span> <span style="color: #949494;">&lt;list [2]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>      <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="color: #949494;">&lt;list [24]&gt;</span>       <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> <span style="color: #949494;">&lt;list [83]&gt;</span> <span style="color: #949494;">&lt;list [2]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>      <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="color: #949494;">&lt;list [21]&gt;</span>       <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> <span style="color: #949494;">&lt;list [89]&gt;</span> <span style="color: #949494;">&lt;list [2]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>      <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="color: #949494;">&lt;list [24]&gt;</span>       <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> <span style="color: #949494;">&lt;list [89]&gt;</span> <span style="color: #949494;">&lt;list [2]&gt;</span> <span style="color: #949494;">&lt;list [1]&gt;</span>      <span style="color: #949494;">&lt;list [18]&gt;</span> <span style="color: #949494;">&lt;list [24]&gt;</span>       <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1,115 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 6 more variables: is_primary_data &lt;list&gt;, organism &lt;list&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   self_reported_ethnicity &lt;list&gt;, sex &lt;list&gt;, suspension_type &lt;list&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   tissue &lt;list&gt;</span></span></span></code></pre>
<p>This indicates that at least some of the datasets had more than one
type of <code>assay</code>, <code>cell_type</code>, etc. The
<code><a href="../reference/facets.html">facets()</a></code> function provides a convenient way of discovering
possible levels of each column, e.g., <code>assay</code>,
<code>organism</code>, <code>self_reported_ethnicity</code>, or
<code>sex</code>, and the number of datasets with each label.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/facets.html">facets</a></span><span class="op">(</span><span class="va">db</span>, <span class="st">"assay"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 36 × 4</span></span></span>
<span><span class="co">##    facet label                          ontology_term_id     n</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> assay 10x 3' v3                      EFO:0009922        534</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> assay 10x 3' v2                      EFO:0009899        235</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> assay Slide-seqV2                    EFO:0030062        223</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> assay Visium Spatial Gene Expression EFO:0010961        107</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> assay 10x 5' v1                      EFO:0011025         69</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> assay Smart-seq2                     EFO:0008931         63</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> assay 10x multiome                   EFO:0030059         60</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> assay 10x 5' v2                      EFO:0009900         18</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> assay sci-RNA-seq3                   EFO:0030028         15</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> assay 10x 5' transcription profiling EFO:0030004         13</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 26 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/facets.html">facets</a></span><span class="op">(</span><span class="va">db</span>, <span class="st">"self_reported_ethnicity"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 32 × 4</span></span></span>
<span><span class="co">##    facet                   label                          ontology_term_id     n</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> self_reported_ethnicity European                       HANCESTRO:0005     483</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> self_reported_ethnicity unknown                        unknown            376</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> self_reported_ethnicity na                             na                 308</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> self_reported_ethnicity Asian                          HANCESTRO:0008     132</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> self_reported_ethnicity African American               HANCESTRO:0568      59</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> self_reported_ethnicity Hispanic or Latin American     HANCESTRO:0014      42</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> self_reported_ethnicity admixed ancestry               HANCESTRO:0306      28</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> self_reported_ethnicity African American or Afro-Cari… HANCESTRO:0016      26</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> self_reported_ethnicity multiethnic                    multiethnic         25</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> self_reported_ethnicity Greater Middle Eastern  (Midd… HANCESTRO:0015      22</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 22 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/facets.html">facets</a></span><span class="op">(</span><span class="va">db</span>, <span class="st">"sex"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 4</span></span></span>
<span><span class="co">##   facet label   ontology_term_id     n</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> sex   male    PATO:0000384       874</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> sex   female  PATO:0000383       645</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> sex   unknown unknown            156</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="filtering-faceted-columns">Filtering faceted columns<a class="anchor" aria-label="anchor" href="#filtering-faceted-columns"></a>
</h3>
<p>Suppose we were interested in finding datasets from the 10x 3’ v3
assay (<code>ontology_term_id</code> of <code>EFO:0009922</code>)
containing individuals of African American ethnicity, and female sex.
Use the <code><a href="../reference/facets.html">facets_filter()</a></code> utility function to filter data
sets as needed</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">african_american_female</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="../reference/query.html">datasets</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="../reference/facets.html">facets_filter</a></span><span class="op">(</span><span class="va">assay</span>, <span class="st">"ontology_term_id"</span>, <span class="st">"EFO:0009922"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="../reference/facets.html">facets_filter</a></span><span class="op">(</span><span class="va">self_reported_ethnicity</span>, <span class="st">"label"</span>, <span class="st">"African American"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="../reference/facets.html">facets_filter</a></span><span class="op">(</span><span class="va">sex</span>, <span class="st">"label"</span>, <span class="st">"female"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>Use <code>nrow(african_american_female)</code> to find the number of
datasets satisfying our criteria. It looks like there are up to</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">african_american_female</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>total_cell_count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">cell_count</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">##   total_cell_count</span></span>
<span><span class="co">##              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>          3<span style="text-decoration: underline;">529</span>061</span></span></code></pre>
<p>cells sequenced (each dataset may contain cells from several
ethnicities, as well as males or individuals of unknown gender, so we do
not know the actual number of cells available without downloading
files). Use <code>left_join</code> to identify the corresponding
collections:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## collections</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>    <span class="va">african_american_female</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">collection_id</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/query.html">collections</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span>,</span>
<span>    by <span class="op">=</span> <span class="st">"collection_id"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 11 × 18</span></span></span>
<span><span class="co">##    collection_id    collection_version_id collection_url consortia contact_email</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> 4195ab4c-20bd-4… 62466cd5-fca8-4961-b… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    nnavin@mdand…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> b9fc3d70-5a72-4… b659b6b3-7663-41f8-8… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    bruce.aronow…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> 625f6bf4-2f33-4… 8d39b458-ddda-4352-a… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    a5wang@healt…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> a98b828a-622a-4… 2be54f40-4035-4c92-b… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    markusbi@med…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> f17b9205-f61f-4… 15a28896-455f-44ee-a… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    genevieve.ko…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> 71f4bccf-53d4-4… 53787064-a595-488c-8… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    kevinmbyrd@g…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> 6b701826-37bb-4… fc5d2347-b859-4744-a… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    astreets@ber…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> b953c942-f5d8-4… d221209d-610d-47f0-b… https://cellx… <span style="color: #949494;">&lt;lgl [1]&gt;</span> icobos@stanf…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> 62e8f058-9c37-4… bbef37d2-df22-4e20-b… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    chanj3@mskcc…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> c9706a92-0e5f-4… 184e8999-210d-47e5-a… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    hnakshat@iup…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">11</span> bcb61471-2a44-4… e58adfce-580f-4280-8… https://cellx… <span style="color: #949494;">&lt;list&gt;</span>    info@kpmp.org</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 13 more variables: contact_name &lt;chr&gt;, curator_name &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   description &lt;chr&gt;, doi &lt;chr&gt;, links &lt;list&gt;, name &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   publisher_metadata &lt;list&gt;, revising_in &lt;lgl&gt;, revision_of &lt;lgl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   visibility &lt;chr&gt;, created_at &lt;date&gt;, published_at &lt;date&gt;, revised_at &lt;date&gt;</span></span></span></code></pre>
</div>
<div class="section level3">
<h3 id="publication-and-other-external-data">Publication and other external data<a class="anchor" aria-label="anchor" href="#publication-and-other-external-data"></a>
</h3>
<p>Many collections include publication information and other external
data. This information is available in the return value of
<code><a href="../reference/query.html">collections()</a></code>, but the helper function
<code><a href="../reference/query.html">publisher_metadata()</a></code>, <code><a href="../reference/query.html">authors()</a></code>, and
<code><a href="../reference/query.html">links()</a></code> may facilite access.</p>
<p>Suppose one is interested in the publication “A single-cell atlas of
the healthy breast tissues reveals clinically relevant clusters of
breast epithelial cells”. Discover it in the collections</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">title_of_interest</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>    <span class="st">"A single-cell atlas of the healthy breast tissues reveals clinically"</span>,</span>
<span>    <span class="st">"relevant clusters of breast epithelial cells"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">collection_of_interest</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="../reference/query.html">collections</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/startsWith.html" class="external-link">startsWith</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">title_of_interest</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">collection_of_interest</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 1</span></span>
<span><span class="co">## Columns: 18</span></span>
<span><span class="co">## $ collection_id         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "c9706a92-0e5f-46c1-96d8-20e42467f287"</span></span>
<span><span class="co">## $ collection_version_id <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "184e8999-210d-47e5-aaa8-56224a925a11"</span></span>
<span><span class="co">## $ collection_url        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "https://cellxgene.cziscience.com/collections/c9…</span></span>
<span><span class="co">## $ consortia             <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> ["CZI Single-Cell Biology"]</span></span>
<span><span class="co">## $ contact_email         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "hnakshat@iupui.edu"</span></span>
<span><span class="co">## $ contact_name          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Harikrishna Nakshatri"</span></span>
<span><span class="co">## $ curator_name          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Jennifer Yu-Sheng Chien"</span></span>
<span><span class="co">## $ description           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Single-cell RNA sequencing (scRNA-seq) is an ev…</span></span>
<span><span class="co">## $ doi                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "10.1016/j.xcrm.2021.100219"</span></span>
<span><span class="co">## $ links                 <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> [["", "RAW_DATA", "https://data.humancellatlas.o…</span></span>
<span><span class="co">## $ name                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "A single-cell atlas of the healthy breast tiss…</span></span>
<span><span class="co">## $ publisher_metadata    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> [[["Bhat-Nakshatri", "Poornima"], ["Gao", "Hongy…</span></span>
<span><span class="co">## $ revising_in           <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> NA</span></span>
<span><span class="co">## $ revision_of           <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> NA</span></span>
<span><span class="co">## $ visibility            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "PUBLIC"</span></span>
<span><span class="co">## $ created_at            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2023-08-22</span></span>
<span><span class="co">## $ published_at          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2021-03-25</span></span>
<span><span class="co">## $ revised_at            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2023-08-22</span></span></code></pre>
<p>Use the <code>collection_id</code> to extract publisher metadata
(including a DOI if available) and author information</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">collection_id_of_interest</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">collection_of_interest</span>, <span class="st">"collection_id"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/query.html">publisher_metadata</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">collection_id</span> <span class="op">==</span> <span class="va">collection_id_of_interest</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 1</span></span>
<span><span class="co">## Columns: 9</span></span>
<span><span class="co">## $ collection_id   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "c9706a92-0e5f-46c1-96d8-20e42467f287"</span></span>
<span><span class="co">## $ name            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "A single-cell atlas of the healthy breast tissues rev…</span></span>
<span><span class="co">## $ is_preprint     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> FALSE</span></span>
<span><span class="co">## $ journal         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Cell Reports Medicine"</span></span>
<span><span class="co">## $ published_at    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2021-03-01</span></span>
<span><span class="co">## $ published_year  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2021</span></span>
<span><span class="co">## $ published_month <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 3</span></span>
<span><span class="co">## $ published_day   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1</span></span>
<span><span class="co">## $ doi             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> NA</span></span></code></pre>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/query.html">authors</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">collection_id</span> <span class="op">==</span> <span class="va">collection_id_of_interest</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 12 × 4</span></span></span>
<span><span class="co">##    collection_id                        family         given       consortium</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> c9706a92-0e5f-46c1-96d8-20e42467f287 Bhat-Nakshatri Poornima    <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> c9706a92-0e5f-46c1-96d8-20e42467f287 Gao            Hongyu      <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> c9706a92-0e5f-46c1-96d8-20e42467f287 Sheng          Liu         <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> c9706a92-0e5f-46c1-96d8-20e42467f287 McGuire        Patrick C.  <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> c9706a92-0e5f-46c1-96d8-20e42467f287 Xuei           Xiaoling    <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> c9706a92-0e5f-46c1-96d8-20e42467f287 Wan            Jun         <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> c9706a92-0e5f-46c1-96d8-20e42467f287 Liu            Yunlong     <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> c9706a92-0e5f-46c1-96d8-20e42467f287 Althouse       Sandra K.   <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> c9706a92-0e5f-46c1-96d8-20e42467f287 Colter         Austyn      <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> c9706a92-0e5f-46c1-96d8-20e42467f287 Sandusky       George      <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">11</span> c9706a92-0e5f-46c1-96d8-20e42467f287 Storniolo      Anna Maria  <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">12</span> c9706a92-0e5f-46c1-96d8-20e42467f287 Nakshatri      Harikrishna <span style="color: #BB0000;">NA</span></span></span></code></pre>
<p>Collections may have links to additional external data, in this case
a DOI and two links to <code>RAW_DATA</code>.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">external_links</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/query.html">links</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span></span>
<span><span class="va">external_links</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 685 × 4</span></span></span>
<span><span class="co">##    collection_id                        link_name             link_type link_url</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> 1ca90a2d-2943-483d-b678-b809bf464c30 UW Alzheimer's Disea… OTHER     http://…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> 1ca90a2d-2943-483d-b678-b809bf464c30 Adult Changes in Tho… OTHER     https:/…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> 1ca90a2d-2943-483d-b678-b809bf464c30 UW BioRepository and… OTHER     https:/…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> 1ca90a2d-2943-483d-b678-b809bf464c30 SEA-AD Homepage       OTHER     https:/…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> 1ca90a2d-2943-483d-b678-b809bf464c30 AD Knowledge Portal   RAW_DATA  https:/…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> 1ca90a2d-2943-483d-b678-b809bf464c30 DOWNLOAD OFFICIAL DA… OTHER     https:/…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> 10ec9198-584e-4a7e-8a24-4a332915a4ef <span style="color: #BB0000;">NA</span>                    OTHER     https:/…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> 10ec9198-584e-4a7e-8a24-4a332915a4ef <span style="color: #BB0000;">NA</span>                    OTHER     https:/…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> 10ec9198-584e-4a7e-8a24-4a332915a4ef phs002371             RAW_DATA  https:/…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> 1b014f39-f202-45ae-bb7d-9286bddd8d8b Sequence data (phs00… RAW_DATA  https:/…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 675 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">external_links</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">link_type</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 2</span></span></span>
<span><span class="co">##   link_type       n</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> DATA_SOURCE    33</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> LAB_WEBSITE    36</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> OTHER         315</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> PROTOCOL       42</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> RAW_DATA      259</span></span></code></pre>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">external_links</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">collection_id</span> <span class="op">==</span> <span class="va">collection_id_of_interest</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">##   collection_id                        link_name link_type link_url             </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> c9706a92-0e5f-46c1-96d8-20e42467f287 <span style="color: #BB0000;">NA</span>        RAW_DATA  https://data.humance…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> c9706a92-0e5f-46c1-96d8-20e42467f287 <span style="color: #BB0000;">NA</span>        RAW_DATA  https://www.ncbi.nlm…</span></span></code></pre>
<p>Conversely, knowledge of a DOI, etc., can be used to discover details
of the corresponding collection.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">doi_of_interest</span> <span class="op">&lt;-</span> <span class="st">"https://doi.org/10.1016/j.stem.2018.12.011"</span></span>
<span><span class="fu"><a href="../reference/query.html">links</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">link_url</span> <span class="op">==</span> <span class="va">doi_of_interest</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="fu"><a href="../reference/query.html">collections</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"collection_id"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 1</span></span>
<span><span class="co">## Columns: 21</span></span>
<span><span class="co">## $ collection_id         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "b1a879f6-5638-48d3-8f64-f6592c1b1561"</span></span>
<span><span class="co">## $ link_name             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "PSC-ATO protocol"</span></span>
<span><span class="co">## $ link_type             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "PROTOCOL"</span></span>
<span><span class="co">## $ link_url              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "https://doi.org/10.1016/j.stem.2018.12.011"</span></span>
<span><span class="co">## $ collection_version_id <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "9f39813e-f8ee-4bb3-ba3b-5b3711875fb7"</span></span>
<span><span class="co">## $ collection_url        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "https://cellxgene.cziscience.com/collections/b1…</span></span>
<span><span class="co">## $ consortia             <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> ["CZI Single-Cell Biology", "Wellcome HCA Strate…</span></span>
<span><span class="co">## $ contact_email         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "st9@sanger.ac.uk"</span></span>
<span><span class="co">## $ contact_name          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Sarah Teichmann"</span></span>
<span><span class="co">## $ curator_name          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Batuhan Cakir"</span></span>
<span><span class="co">## $ description           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Single-cell genomics studies have decoded the i…</span></span>
<span><span class="co">## $ doi                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "10.1126/science.abo0510"</span></span>
<span><span class="co">## $ links                 <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> [["scVI Models", "DATA_SOURCE", "https://develop…</span></span>
<span><span class="co">## $ name                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Mapping the developing human immune system acro…</span></span>
<span><span class="co">## $ publisher_metadata    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> [[["Suo", "Chenqu"], ["Dann", "Emma"], ["Goh", "…</span></span>
<span><span class="co">## $ revising_in           <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> NA</span></span>
<span><span class="co">## $ revision_of           <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> NA</span></span>
<span><span class="co">## $ visibility            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "PUBLIC"</span></span>
<span><span class="co">## $ created_at            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2023-08-31</span></span>
<span><span class="co">## $ published_at          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2022-10-04</span></span>
<span><span class="co">## $ revised_at            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2023-08-24</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="visualizing-data-in-cellxgene">Visualizing data in <code>cellxgene</code><a class="anchor" aria-label="anchor" href="#visualizing-data-in-cellxgene"></a>
</h2>
<p>Discover files associated with our first selected dataset</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_files</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>        <span class="va">african_american_female</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">dataset_id</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="../reference/query.html">files</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span>,</span>
<span>        by <span class="op">=</span> <span class="st">"dataset_id"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="va">selected_files</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 68 × 4</span></span></span>
<span><span class="co">##    dataset_id                             filesize filetype url                 </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> e47c65a8-7d2f-48b8-908e-04ea6505fa26  800<span style="text-decoration: underline;">797</span>163 H5AD     https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> e47c65a8-7d2f-48b8-908e-04ea6505fa26  773<span style="text-decoration: underline;">360</span>314 RDS      https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> c8d40d53-387b-48f2-9f89-72bfdb9c7c9f  385<span style="text-decoration: underline;">922</span>942 H5AD     https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> c8d40d53-387b-48f2-9f89-72bfdb9c7c9f  362<span style="text-decoration: underline;">851</span>875 RDS      https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> a6388a6f-6076-401b-9b30-7d4306a20035  315<span style="text-decoration: underline;">326</span>067 H5AD     https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> a6388a6f-6076-401b-9b30-7d4306a20035  302<span style="text-decoration: underline;">258</span>458 RDS      https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> a41202e6-173c-477c-8b4d-e0688ee1c4cb   82<span style="text-decoration: underline;">026</span>236 H5AD     https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> a41202e6-173c-477c-8b4d-e0688ee1c4cb   74<span style="text-decoration: underline;">894</span>351 RDS      https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> 842c6f5d-4a94-4eef-8510-8c792d1124bc <span style="text-decoration: underline;">7</span>211<span style="text-decoration: underline;">362</span>715 H5AD     https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> 842c6f5d-4a94-4eef-8510-8c792d1124bc <span style="text-decoration: underline;">6</span>817<span style="text-decoration: underline;">801</span>616 RDS      https://datasets.ce…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 58 more rows</span></span></span></code></pre>
<p>The <code>filetype</code> column lists the type of each file. The
cellxgene service can be used to visualize <em>datasets</em> that have
<code>CXG</code> files.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_files</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">filetype</span> <span class="op">==</span> <span class="st">"CXG"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># visualize a single dataset</span></span>
<span>    <span class="fu"><a href="../reference/query.html">datasets_visualize</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Visualization is an interactive process, so
<code><a href="../reference/query.html">datasets_visualize()</a></code> will only open up to 5 browser tabs
per call.</p>
</div>
<div class="section level2">
<h2 id="file-download-and-use">File download and use<a class="anchor" aria-label="anchor" href="#file-download-and-use"></a>
</h2>
<p>Datasets usually contain <code>CXG</code> (cellxgene visualization),
<code>H5AD</code> (files produced by the python AnnData module), and
<code>Rds</code> (serialized files produced by the <em>R</em> Seurat
package). There are no public parsers for <code>CXG</code>, and the
<code>Rds</code> files may be unreadable if the version of Seurat used
to create the file is different from the version used to read the file.
We therefore focus on the <code>H5AD</code> files. For illustration, we
download one of our selected files.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">local_file</span> <span class="op">&lt;-</span></span>
<span>    <span class="va">selected_files</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>        <span class="va">dataset_id</span> <span class="op">==</span> <span class="st">"de985818-285f-4f59-9dbd-d74968fddba3"</span>,</span>
<span>        <span class="va">filetype</span> <span class="op">==</span> <span class="st">"H5AD"</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/query.html">files_download</a></span><span class="op">(</span>dry.run <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">local_file</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "64942e4e-3f6e-4ca0-8226-62e8491b5786.h5ad"</span></span></code></pre>
<p>These are downloaded to a local cache (use the internal function
<code>cellxgenedp:::.cellxgenedb_cache_path()</code> for the location of
the cache), so the process is only time-consuming the first time.</p>
<p><code>H5AD</code> files can be converted to <em>R</em> /
<em>Bioconductor</em> objects using the <a href="https://bioconductor.org/packages/zelkonverter" class="external-link">zellkonverter</a>
package.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">h5ad</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/zellkonverter/man/readH5AD.html" class="external-link">readH5AD</a></span><span class="op">(</span><span class="va">local_file</span>, use_hdf5 <span class="op">=</span> <span class="cn">TRUE</span>, reader <span class="op">=</span> <span class="st">"R"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span>
<span></span>
<span><span class="co">## Warning in H5Aread(A, ...): Reading attribute data of type 'ENUM' not yet</span></span>
<span><span class="co">## implemented. Values replaced by NA's.</span></span></code></pre>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">h5ad</span></span></code></pre></div>
<pre><code><span><span class="co">## class: SingleCellExperiment </span></span>
<span><span class="co">## dim: 33234 31696 </span></span>
<span><span class="co">## metadata(3): default_embedding schema_version title</span></span>
<span><span class="co">## assays(1): X</span></span>
<span><span class="co">## rownames(33234): ENSG00000243485 ENSG00000237613 ... ENSG00000277475</span></span>
<span><span class="co">##   ENSG00000268674</span></span>
<span><span class="co">## rowData names(4): feature_is_filtered feature_name feature_reference</span></span>
<span><span class="co">##   feature_biotype</span></span>
<span><span class="co">## colnames(31696): CMGpool_AAACCCAAGGACAACC CMGpool_AAACCCACAATCTCTT ...</span></span>
<span><span class="co">##   K109064_TTTGTTGGTTGCATCA K109064_TTTGTTGGTTGGACCC</span></span>
<span><span class="co">## colData names(34): donor_id self_reported_ethnicity_ontology_term_id</span></span>
<span><span class="co">##   ... self_reported_ethnicity development_stage</span></span>
<span><span class="co">## reducedDimNames(3): X_pca X_tsne X_umap</span></span>
<span><span class="co">## mainExpName: NULL</span></span>
<span><span class="co">## altExpNames(0):</span></span></code></pre>
<p>The <code>SingleCellExperiment</code> object is a matrix-like object
with rows corresponding to genes and columns to cells. Thus we can
easily explore the cells present in the data.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">h5ad</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/SummarizedExperiment/man/SummarizedExperiment-class.html" class="external-link">colData</a></span><span class="op">(</span><span class="va">h5ad</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">sex</span>, <span class="va">donor_id</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 7 × 3</span></span></span>
<span><span class="co">##   sex    donor_id                     n</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> female D1                        <span style="text-decoration: underline;">2</span>303</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> female D2                         864</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> female D3                        <span style="text-decoration: underline;">2</span>517</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> female D4                        <span style="text-decoration: underline;">1</span>771</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> female D5                        <span style="text-decoration: underline;">2</span>244</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span> female D11                       <span style="text-decoration: underline;">7</span>454</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">7</span> female pooled [D9,D7,D8,D10,D6] <span style="text-decoration: underline;">14</span>543</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="next-steps">Next steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>The <a href="https://bioconductor.org/books/OSCA" class="external-link">Orchestrating
Single-Cell Analysis with Bioconductor</a> online resource provides an
excellent introduction to analysis and visualization of single-cell data
in <em>R</em> / <em>Bioconductor</em>. Extensive opportunities for
working with AnnData objects in <em>R</em> but using the native python
interface are briefly described in, e.g., <code><a href="https://rdrr.io/pkg/zellkonverter/man/AnnData-Conversion.html" class="external-link">?AnnData2SCE</a></code> help
page of <a href="https://bioconductor.org/packages/zelkonverter" class="external-link">zellkonverter</a>.</p>
<p>The <a href="https://bioconductor.org/packages/hca" class="external-link">hca</a> package
provides programmatic access to the Human Cell Atlas <a href="https://data.humancellatlas.org/explore" class="external-link">data portal</a>, allowing
retrieval of primary as well as derived single-cell data files.</p>
</div>
<div class="section level2">
<h2 id="api-changes">API changes<a class="anchor" aria-label="anchor" href="#api-changes"></a>
</h2>
<p>Data access provided by CELLxGENE has changed to a new ‘Discover’ <a href="https://api.cellxgene.cziscience.com/curation/ui/" class="external-link">API</a>. The
main functionality of the <a href="https://bioconductor.org/packages/cellxgenedp" class="external-link">cellxgenedp</a>
package has not changed, but specific columns have been removed,
replaced or added, as follows:</p>
<p><code><a href="../reference/query.html">collections()</a></code></p>
<ul>
<li>Removed: <code>access_type</code>,
<code>data_submission_policy_version</code>
</li>
<li>Replaced: <code>updated_at</code> replaced with
<code>revised_at</code>
</li>
<li>Added: <code>collection_version_id</code>,
<code>collection_url</code>, <code>doi</code>, <code>revising_in</code>,
<code>revision_of</code>
</li>
</ul>
<p><code><a href="../reference/query.html">datasets()</a></code></p>
<ul>
<li>Removed: <code>is_valid</code>, <code>processing_status</code>,
<code>published</code>, <code>revision</code>,
<code>created_at</code>
</li>
<li>Replaced: <code>dataset_deployments</code> replaced with
<code>explorer_url</code>, <code>name</code> replaced with
<code>title</code>, <code>updated_at</code> replaced with
<code>revised_at</code>
</li>
<li>Added: <code>dataset_version_id</code>,
<code>batch_condition</code>,
<code>x_approximate_distribution</code>
</li>
</ul>
<p><code><a href="../reference/query.html">files()</a></code></p>
<ul>
<li>Removed: <code>file_id</code>, <code>filename</code>,
<code>s3_uri</code>, <code>user_submitted</code>,
<code>created_at</code>, <code>updated_at</code>
</li>
<li>Added: <code>filesize</code>, <code>url</code>
</li>
</ul>
</div>
<div class="section level2">
<h2 class="unnumbered" id="session-info">Session info<a class="anchor" aria-label="anchor" href="#session-info"></a>
</h2>
<pre><code><span><span class="co">## R version 4.3.1 (2023-06-16)</span></span>
<span><span class="co">## Platform: x86_64-pc-linux-gnu (64-bit)</span></span>
<span><span class="co">## Running under: Ubuntu 22.04.3 LTS</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Matrix products: default</span></span>
<span><span class="co">## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## locale:</span></span>
<span><span class="co">##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## time zone: UTC</span></span>
<span><span class="co">## tzcode source: system (glibc)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attached base packages:</span></span>
<span><span class="co">## [1] stats4    stats     graphics  grDevices utils     datasets  methods  </span></span>
<span><span class="co">## [8] base     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## other attached packages:</span></span>
<span><span class="co">##  [1] cellxgenedp_1.7.0           dplyr_1.1.3                </span></span>
<span><span class="co">##  [3] SingleCellExperiment_1.22.0 SummarizedExperiment_1.30.2</span></span>
<span><span class="co">##  [5] Biobase_2.60.0              GenomicRanges_1.52.1       </span></span>
<span><span class="co">##  [7] GenomeInfoDb_1.36.4         IRanges_2.34.1             </span></span>
<span><span class="co">##  [9] S4Vectors_0.38.2            BiocGenerics_0.46.0        </span></span>
<span><span class="co">## [11] MatrixGenerics_1.12.3       matrixStats_1.0.0          </span></span>
<span><span class="co">## [13] zellkonverter_1.10.1        BiocStyle_2.28.1           </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## loaded via a namespace (and not attached):</span></span>
<span><span class="co">##  [1] tidyselect_1.2.0        filelock_1.0.2          bitops_1.0-7           </span></span>
<span><span class="co">##  [4] fastmap_1.1.1           RCurl_1.98-1.12         promises_1.2.1         </span></span>
<span><span class="co">##  [7] digest_0.6.33           mime_0.12               lifecycle_1.0.3        </span></span>
<span><span class="co">## [10] ellipsis_0.3.2          magrittr_2.0.3          compiler_4.3.1         </span></span>
<span><span class="co">## [13] rlang_1.1.1             sass_0.4.7              tools_4.3.1            </span></span>
<span><span class="co">## [16] utf8_1.2.4              yaml_2.3.7              knitr_1.44             </span></span>
<span><span class="co">## [19] S4Arrays_1.0.6          htmlwidgets_1.6.2       curl_5.1.0             </span></span>
<span><span class="co">## [22] reticulate_1.34.0       DelayedArray_0.26.7     abind_1.4-5            </span></span>
<span><span class="co">## [25] HDF5Array_1.28.1        withr_2.5.1             purrr_1.0.2            </span></span>
<span><span class="co">## [28] desc_1.4.2              grid_4.3.1              fansi_1.0.5            </span></span>
<span><span class="co">## [31] xtable_1.8-4            Rhdf5lib_1.22.1         cli_3.6.1              </span></span>
<span><span class="co">## [34] rmarkdown_2.25          crayon_1.5.2            ragg_1.2.6             </span></span>
<span><span class="co">## [37] generics_0.1.3          httr_1.4.7              rhdf5_2.44.0           </span></span>
<span><span class="co">## [40] cachem_1.0.8            stringr_1.5.0           zlibbioc_1.46.0        </span></span>
<span><span class="co">## [43] parallel_4.3.1          BiocManager_1.30.22     XVector_0.40.0         </span></span>
<span><span class="co">## [46] basilisk_1.12.1         vctrs_0.6.4             Matrix_1.5-4.1         </span></span>
<span><span class="co">## [49] jsonlite_1.8.7          dir.expiry_1.8.0        bookdown_0.36          </span></span>
<span><span class="co">## [52] systemfonts_1.0.5       jquerylib_0.1.4         glue_1.6.2             </span></span>
<span><span class="co">## [55] pkgdown_2.0.7           DT_0.30                 stringi_1.7.12         </span></span>
<span><span class="co">## [58] later_1.3.1             tibble_3.2.1            pillar_1.9.0           </span></span>
<span><span class="co">## [61] rhdf5filters_1.12.1     basilisk.utils_1.12.1   htmltools_0.5.6.1      </span></span>
<span><span class="co">## [64] GenomeInfoDbData_1.2.10 R6_2.5.1                textshaping_0.3.7      </span></span>
<span><span class="co">## [67] rprojroot_2.0.3         evaluate_0.22           shiny_1.7.5.1          </span></span>
<span><span class="co">## [70] lattice_0.21-8          png_0.1-8               memoise_2.0.1          </span></span>
<span><span class="co">## [73] httpuv_1.6.12           bslib_0.5.1             rjsoncons_1.0.0        </span></span>
<span><span class="co">## [76] Rcpp_1.0.11             xfun_0.40               fs_1.6.3               </span></span>
<span><span class="co">## [79] pkgconfig_2.0.3</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Martin Morgan, Kayla Interdonato.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>

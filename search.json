[{"path":"https://mtmorgan.github.io/cellxgenedp/articles/using_cellxgenedp.html","id":"installation-and-use","dir":"Articles","previous_headings":"","what":"Installation and use","title":"Discover and download datasets and files from the cellxgene data portal","text":"package available Bioconductor version 3.15 later. following code installs cellxgenedp well packages required vignette. Use following pkgs vector install GitHub (latest, unchecked, development version) instead Load package current R session. make extensive use dplyr packages, end vignette use SingleCellExperiment zellkonverter, load well.","code":"pkgs <- c(\"cellxgenedp\", \"zellkonverter\", \"SingleCellExperiment\", \"HDF5Array\") required_pkgs <- pkgs[!pkgs %in% rownames(installed.packages())] BiocManager::install(required_pkgs) pkgs <- c(     \"mtmorgan/cellxgenedp\", \"zellkonverter\", \"SingleCellExperiment\", \"HDF5Array\" ) suppressPackageStartupMessages({     library(zellkonverter)     library(SingleCellExperiment) # load early to avoid masking dplyr::count()     library(dplyr)     library(cellxgenedp) })"},{"path":"https://mtmorgan.github.io/cellxgenedp/articles/using_cellxgenedp.html","id":"cxg-provides-a-shiny-interface","dir":"Articles","previous_headings":"","what":"cxg() Provides a ‘shiny’ interface","title":"Discover and download datasets and files from the cellxgene data portal","text":"following sections outline use cellxgenedp package R script; functionality also available cxg() shiny application, providing easy way identify, download, visualize one several datasets. Start app choose project first tab, dataset visualization, one datasets download!","code":"cxg()"},{"path":"https://mtmorgan.github.io/cellxgenedp/articles/using_cellxgenedp.html","id":"collections-datasets-and-files","dir":"Articles","previous_headings":"","what":"Collections, datasets and files","title":"Discover and download datasets and files from the cellxgene data portal","text":"Retrieve metadata resources available cellxgene data portal using db(): Printing db object provides brief overview available data, well hints, form functions like collections(), exploration. portal organizes data hierarchically, ‘collections’ (research studies, approximately), ‘datasets’, ‘files’. Discover data using corresponding functions. resources unique primary identifier (e.g., file_id) well identifier describing relationship resource components database (e.g., dataset_id). identifiers can used ‘join’ information across tables.","code":"db <- db() db ## cellxgene_db ## number of collections(): 145 ## number of datasets(): 841 ## number of files(): 3348 collections(db) ## # A tibble: 145 × 15 ##    collection_id   access_type consortia contact_email contact_name curator_name ##    <chr>           <chr>       <list>    <chr>         <chr>        <chr>        ##  1 2b02dff7-e427-… READ        <lgl [1]> miriam.merad… Miriam Merad Batuhan Cak… ##  2 03cdc7f4-bd08-… READ        <lgl [1]> tien.peng@uc… Tien Peng    Jason Hilton ##  3 a72afd53-ab92-… READ        <lgl [1]> cblish@stanf… Catherine A… Jennifer Yu… ##  4 e9eec7f5-8519-… READ        <list>    mrc38@cam.ac… Menna R Cla… Batuhan Cak… ##  5 4796c91c-9d8f-… READ        <lgl [1]> vazquezi@msk… Ignacio Váz… Jason Hilton ##  6 bcb61471-2a44-… READ        <list>    info@kpmp.org KPMP         Jennifer Yu… ##  7 13d1c580-4b17-… READ        <list>    my4@sanger.a… Matthew You… Jason Hilton ##  8 5e469121-c203-… READ        <list>    biren@ucsd.e… Bing Ren     Jennifer Yu… ##  9 9132fae8-bdfe-… READ        <lgl [1]> zhuang@chemi… Xiaowei Zhu… Jennifer Yu… ## 10 0a77d4c0-d5d0-… READ        <list>    fabian.theis… Fabian Theis Jennifer Yu… ## # ℹ 135 more rows ## # ℹ 9 more variables: data_submission_policy_version <chr>, description <chr>, ## #   links <list>, name <chr>, publisher_metadata <list>, visibility <chr>, ## #   created_at <date>, published_at <date>, updated_at <date> datasets(db) ## # A tibble: 841 × 26 ##    dataset_id                 collection_id donor_id assay  cell_count cell_type ##    <chr>                      <chr>         <list>   <list>      <int> <list>    ##  1 7a637398-175f-4cf2-b06a-6… 2b02dff7-e42… <list>   <list>      32458 <list>    ##  2 9aca7e29-d19c-46a7-ab11-6… 03cdc7f4-bd0… <list>   <list>      35699 <list>    ##  3 961e3ae2-f9e7-4cf8-8637-6… 03cdc7f4-bd0… <list>   <list>      18386 <list>    ##  4 7847f811-da05-4ac5-95ec-b… 03cdc7f4-bd0… <list>   <list>       3662 <list>    ##  5 a0982372-a1cc-4466-8d2b-e… a72afd53-ab9… <list>   <list>      44721 <list>    ##  6 14c0c08d-fb2e-4a7d-8b50-7… e9eec7f5-851… <list>   <list>     130908 <list>    ##  7 4f8e3657-c1a8-440d-8bc6-a… 4796c91c-9d8… <list>   <list>     211624 <list>    ##  8 48f8ad54-091a-41be-ac40-1… 4796c91c-9d8… <list>   <list>     929690 <list>    ##  9 1bcf060f-2c2f-4e30-b2d6-1… 4796c91c-9d8… <list>   <list>      24025 <list>    ## 10 1b785bbe-71b5-4f92-bfce-b… 4796c91c-9d8… <list>   <list>     221315 <list>    ## # ℹ 831 more rows ## # ℹ 20 more variables: dataset_deployments <chr>, development_stage <list>, ## #   disease <list>, is_primary_data <chr>, is_valid <lgl>, ## #   mean_genes_per_cell <dbl>, name <chr>, organism <list>, ## #   processing_status <list>, published <lgl>, revision <int>, ## #   schema_version <chr>, self_reported_ethnicity <list>, sex <list>, ## #   suspension_type <list>, tissue <list>, tombstone <lgl>, … files(db) ## # A tibble: 3,348 × 8 ##    file_id         dataset_id filename filetype s3_uri user_submitted created_at ##    <chr>           <chr>      <chr>    <chr>    <chr>  <lgl>          <date>     ##  1 e9b93ee2-37a7-… 7a637398-… \"\"       CXG      s3://… TRUE           1970-01-01 ##  2 78e930cd-3b37-… 7a637398-… \"local.… RDS      s3://… TRUE           1970-01-01 ##  3 355d82a4-5a26-… 7a637398-… \"raw.h5… RAW_H5AD s3://… TRUE           1970-01-01 ##  4 b06ab531-4fdb-… 7a637398-… \"local.… H5AD     s3://… TRUE           1970-01-01 ##  5 1ca25a06-7251-… 9aca7e29-… \"raw.h5… RAW_H5AD s3://… TRUE           1970-01-01 ##  6 a2dd5b48-98df-… 9aca7e29-… \"local.… H5AD     s3://… TRUE           1970-01-01 ##  7 72e7a22d-b70f-… 9aca7e29-… \"local.… RDS      s3://… TRUE           1970-01-01 ##  8 abc47602-0f01-… 9aca7e29-… \"\"       CXG      s3://… TRUE           1970-01-01 ##  9 1fd54259-97f6-… 961e3ae2-… \"raw.h5… RAW_H5AD s3://… TRUE           1970-01-01 ## 10 059cc62f-6a5a-… 961e3ae2-… \"local.… H5AD     s3://… TRUE           1970-01-01 ## # ℹ 3,338 more rows ## # ℹ 1 more variable: updated_at <date>"},{"path":"https://mtmorgan.github.io/cellxgenedp/articles/using_cellxgenedp.html","id":"using-dplyr-to-navigate-data","dir":"Articles","previous_headings":"Collections, datasets and files","what":"Using dplyr to navigate data","title":"Discover and download datasets and files from the cellxgene data portal","text":"collection may several datasets, datasets may several files. instance, collection datasets can find collection joining collections() table. can take similar strategy identify datasets belonging collection","code":"collection_with_most_datasets <-     datasets(db) |>     count(collection_id, sort = TRUE) |>     slice(1) left_join(     collection_with_most_datasets |> select(collection_id),     collections(db),     by = \"collection_id\" ) |> glimpse() ## Rows: 1 ## Columns: 15 ## $ collection_id                  <chr> \"283d65eb-dd53-496d-adb7-7570c7caa443\" ## $ access_type                    <chr> \"READ\" ## $ consortia                      <list> [\"BRAIN Initiative\"] ## $ contact_email                  <chr> \"kimberly.siletti@ki.se\" ## $ contact_name                   <chr> \"Kimberly Siletti\" ## $ curator_name                   <chr> \"James Chaffer\" ## $ data_submission_policy_version <chr> \"1.0\" ## $ description                    <chr> \"The human brain directs a wide range o… ## $ links                          <list> [[\"\", \"RAW_DATA\", \"http://data.nemoarch… ## $ name                           <chr> \"Transcriptomic diversity of cell type… ## $ publisher_metadata             <list> [[[\"Siletti\", \"Kimberly\"], [\"Hodge\", \"R… ## $ visibility                     <chr> \"PUBLIC\" ## $ created_at                     <date> 2023-06-21 ## $ published_at                   <date> 2022-12-09 ## $ updated_at                     <date> 2023-06-21 left_join(     collection_with_most_datasets |> select(collection_id),     datasets(db),     by = \"collection_id\" ) ## # A tibble: 139 × 26 ##    collection_id                 dataset_id donor_id assay  cell_count cell_type ##    <chr>                         <chr>      <list>   <list>      <int> <list>    ##  1 283d65eb-dd53-496d-adb7-7570… c3bf2fd0-… <list>   <list>      33641 <list>    ##  2 283d65eb-dd53-496d-adb7-7570… cca96085-… <list>   <list>      50362 <list>    ##  3 283d65eb-dd53-496d-adb7-7570… 93f735bd-… <list>   <list>      33794 <list>    ##  4 283d65eb-dd53-496d-adb7-7570… cb0c744a-… <list>   <list>      27210 <list>    ##  5 283d65eb-dd53-496d-adb7-7570… 394c1d22-… <list>   <list>      85546 <list>    ##  6 283d65eb-dd53-496d-adb7-7570… 7dcf2101-… <list>   <list>      21534 <list>    ##  7 283d65eb-dd53-496d-adb7-7570… 6597f89a-… <list>   <list>      32306 <list>    ##  8 283d65eb-dd53-496d-adb7-7570… 2be10e5e-… <list>   <list>      12557 <list>    ##  9 283d65eb-dd53-496d-adb7-7570… b8e777bf-… <list>   <list>      38188 <list>    ## 10 283d65eb-dd53-496d-adb7-7570… 95417463-… <list>   <list>      24190 <list>    ## # ℹ 129 more rows ## # ℹ 20 more variables: dataset_deployments <chr>, development_stage <list>, ## #   disease <list>, is_primary_data <chr>, is_valid <lgl>, ## #   mean_genes_per_cell <dbl>, name <chr>, organism <list>, ## #   processing_status <list>, published <lgl>, revision <int>, ## #   schema_version <chr>, self_reported_ethnicity <list>, sex <list>, ## #   suspension_type <list>, tissue <list>, tombstone <lgl>, …"},{"path":"https://mtmorgan.github.io/cellxgenedp/articles/using_cellxgenedp.html","id":"facets-provides-information-on-levels-present-in-specific-columns","dir":"Articles","previous_headings":"Collections, datasets and files","what":"facets() provides information on ‘levels’ present in specific columns","title":"Discover and download datasets and files from the cellxgene data portal","text":"Notice columns ‘lists’ rather atomic vectors like ‘character’ ‘integer’. indicates least datasets one type assay, cell_type, etc. facets() function provides convenient way discovering possible levels column, e.g., assay, organism, self_reported_ethnicity, sex, number datasets label.","code":"datasets(db) |>     select(where(is.list)) ## # A tibble: 841 × 11 ##    donor_id    assay      cell_type   development_stage disease    organism   ##    <list>      <list>     <list>      <list>            <list>     <list>     ##  1 <list [11]> <list [2]> <list [19]> <list [1]>        <list [1]> <list [1]> ##  2 <list [6]>  <list [1]> <list [9]>  <list [5]>        <list [2]> <list [1]> ##  3 <list [6]>  <list [1]> <list [9]>  <list [5]>        <list [2]> <list [1]> ##  4 <list [6]>  <list [1]> <list [1]>  <list [5]>        <list [2]> <list [1]> ##  5 <list [13]> <list [1]> <list [19]> <list [10]>       <list [2]> <list [1]> ##  6 <list [51]> <list [3]> <list [16]> <list [7]>        <list [1]> <list [1]> ##  7 <list [41]> <list [1]> <list [1]>  <list [24]>       <list [1]> <list [1]> ##  8 <list [41]> <list [1]> <list [10]> <list [24]>       <list [1]> <list [1]> ##  9 <list [41]> <list [1]> <list [3]>  <list [24]>       <list [1]> <list [1]> ## 10 <list [41]> <list [1]> <list [1]>  <list [24]>       <list [1]> <list [1]> ## # ℹ 831 more rows ## # ℹ 5 more variables: processing_status <list>, self_reported_ethnicity <list>, ## #   sex <list>, suspension_type <list>, tissue <list> facets(db, \"assay\") ## # A tibble: 34 × 4 ##    facet label                          ontology_term_id     n ##    <chr> <chr>                          <chr>            <int> ##  1 assay 10x 3' v3                      EFO:0009922        447 ##  2 assay 10x 3' v2                      EFO:0009899        224 ##  3 assay Slide-seqV2                    EFO:0030062        129 ##  4 assay 10x 5' v1                      EFO:0011025         66 ##  5 assay Smart-seq2                     EFO:0008931         62 ##  6 assay Visium Spatial Gene Expression EFO:0010961         46 ##  7 assay 10x multiome                   EFO:0030059         26 ##  8 assay 10x 5' v2                      EFO:0009900         16 ##  9 assay 10x 5' transcription profiling EFO:0030004         12 ## 10 assay Drop-seq                       EFO:0008722         12 ## # ℹ 24 more rows facets(db, \"self_reported_ethnicity\") ## # A tibble: 28 × 4 ##    facet                   label                          ontology_term_id     n ##    <chr>                   <chr>                          <chr>            <int> ##  1 self_reported_ethnicity European                       HANCESTRO:0005     402 ##  2 self_reported_ethnicity unknown                        unknown            289 ##  3 self_reported_ethnicity na                             na                 190 ##  4 self_reported_ethnicity Asian                          HANCESTRO:0008     102 ##  5 self_reported_ethnicity African American               HANCESTRO:0568      54 ##  6 self_reported_ethnicity Hispanic or Latin American     HANCESTRO:0014      40 ##  7 self_reported_ethnicity African American or Afro-Cari… HANCESTRO:0016      26 ##  8 self_reported_ethnicity multiethnic                    multiethnic         25 ##  9 self_reported_ethnicity Greater Middle Eastern  (Midd… HANCESTRO:0015      22 ## 10 self_reported_ethnicity British                        HANCESTRO:0462      10 ## # ℹ 18 more rows facets(db, \"sex\") ## # A tibble: 3 × 4 ##   facet label   ontology_term_id     n ##   <chr> <chr>   <chr>            <int> ## 1 sex   male    PATO:0000384       717 ## 2 sex   female  PATO:0000383       495 ## 3 sex   unknown unknown             58"},{"path":"https://mtmorgan.github.io/cellxgenedp/articles/using_cellxgenedp.html","id":"filtering-faceted-columns","dir":"Articles","previous_headings":"Collections, datasets and files","what":"Filtering faceted columns","title":"Discover and download datasets and files from the cellxgene data portal","text":"Suppose interested finding datasets 10x 3’ v3 assay (ontology_term_id EFO:0009922) containing individuals African American ethnicity, female sex. Use facets_filter() utility function filter data sets needed Use nrow(african_american_female) find number datasets satisfying criteria. looks like cells sequenced (dataset may contain cells several ethnicities, well males individuals unknown gender, know actual number cells available without downloading files). Use left_join identify corresponding collections:","code":"african_american_female <-     datasets(db) |>     filter(         facets_filter(assay, \"ontology_term_id\", \"EFO:0009922\"),         facets_filter(self_reported_ethnicity, \"label\", \"African American\"),         facets_filter(sex, \"label\", \"female\")     ) african_american_female |>     summarise(total_cell_count = sum(cell_count)) ## # A tibble: 1 × 1 ##   total_cell_count ##              <int> ## 1          3293238 ## collections left_join(     african_american_female |> select(collection_id) |> distinct(),     collections(db),     by = \"collection_id\" ) ## # A tibble: 9 × 15 ##   collection_id    access_type consortia contact_email contact_name curator_name ##   <chr>            <chr>       <list>    <chr>         <chr>        <chr>        ## 1 bcb61471-2a44-4… READ        <list>    info@kpmp.org KPMP         Jennifer Yu… ## 2 b953c942-f5d8-4… READ        <lgl [1]> icobos@stanf… Inma Cobos   Jennifer Yu… ## 3 c9706a92-0e5f-4… READ        <list>    hnakshat@iup… Harikrishna… Jennifer Yu… ## 4 a98b828a-622a-4… READ        <list>    markusbi@med… Markus Bitz… Jennifer Yu… ## 5 625f6bf4-2f33-4… READ        <list>    a5wang@healt… Allen Wang   Jennifer Yu… ## 6 b9fc3d70-5a72-4… READ        <list>    bruce.aronow… Bruce Aronow Jennifer Yu… ## 7 6b701826-37bb-4… READ        <list>    astreets@ber… Aaron Stree… Jennifer Yu… ## 8 62e8f058-9c37-4… READ        <list>    chanj3@mskcc… Joseph Chan  Jennifer Yu… ## 9 4195ab4c-20bd-4… READ        <list>    nnavin@mdand… Nicholas Na… Jennifer Yu… ## # ℹ 9 more variables: data_submission_policy_version <chr>, description <chr>, ## #   links <list>, name <chr>, publisher_metadata <list>, visibility <chr>, ## #   created_at <date>, published_at <date>, updated_at <date>"},{"path":"https://mtmorgan.github.io/cellxgenedp/articles/using_cellxgenedp.html","id":"publication-and-other-external-data","dir":"Articles","previous_headings":"Collections, datasets and files","what":"Publication and other external data","title":"Discover and download datasets and files from the cellxgene data portal","text":"Many collections include publication information external data. information available return value collections(), helper function publisher_metadata(), authors(), links() may facilite access. Suppose one interested publication “single-cell atlas healthy breast tissues reveals clinically relevant clusters breast epithelial cells”. Discover collections Use collection_id extract publisher metadata (including DOI available) author information Collections may links additional external data, case DOI two links RAW_DATA. Conversely, knowledge DOI, etc., can used discover details corresponding collection.","code":"title_of_interest <- paste(     \"A single-cell atlas of the healthy breast tissues reveals clinically\",     \"relevant clusters of breast epithelial cells\" ) collection_of_interest <-     collections(db) |>     dplyr::filter(startsWith(name, title_of_interest)) collection_of_interest |>     glimpse() ## Rows: 1 ## Columns: 15 ## $ collection_id                  <chr> \"c9706a92-0e5f-46c1-96d8-20e42467f287\" ## $ access_type                    <chr> \"READ\" ## $ consortia                      <list> [\"CZI Single-Cell Biology\"] ## $ contact_email                  <chr> \"hnakshat@iupui.edu\" ## $ contact_name                   <chr> \"Harikrishna Nakshatri\" ## $ curator_name                   <chr> \"Jennifer Yu-Sheng Chien\" ## $ data_submission_policy_version <chr> \"1.0\" ## $ description                    <chr> \"Single-cell RNA sequencing (scRNA-seq)… ## $ links                          <list> [[\"\", \"RAW_DATA\", \"https://data.humance… ## $ name                           <chr> \"A single-cell atlas of the healthy br… ## $ publisher_metadata             <list> [[[\"Bhat-Nakshatri\", \"Poornima\"], [\"Gao… ## $ visibility                     <chr> \"PUBLIC\" ## $ created_at                     <date> 2023-02-16 ## $ published_at                   <date> 2021-03-25 ## $ updated_at                     <date> 2023-02-16 collection_id_of_interest <- pull(collection_of_interest, \"collection_id\") publisher_metadata(db) |>     filter(collection_id == collection_id_of_interest) |>     glimpse() ## Rows: 1 ## Columns: 9 ## $ collection_id   <chr> \"c9706a92-0e5f-46c1-96d8-20e42467f287\" ## $ name            <chr> \"A single-cell atlas of the healthy breast tissues rev… ## $ is_preprint     <lgl> FALSE ## $ journal         <chr> \"Cell Reports Medicine\" ## $ published_at    <date> 2021-03-01 ## $ published_year  <int> 2021 ## $ published_month <int> 3 ## $ published_day   <int> 1 ## $ doi             <chr> \"https://doi.org/10.1016/j.xcrm.2021.100219\" authors(db) |>     filter(collection_id == collection_id_of_interest) ## # A tibble: 12 × 4 ##    collection_id                        family         given       consortium ##    <chr>                                <chr>          <chr>       <chr>      ##  1 c9706a92-0e5f-46c1-96d8-20e42467f287 Bhat-Nakshatri Poornima    NA         ##  2 c9706a92-0e5f-46c1-96d8-20e42467f287 Gao            Hongyu      NA         ##  3 c9706a92-0e5f-46c1-96d8-20e42467f287 Sheng          Liu         NA         ##  4 c9706a92-0e5f-46c1-96d8-20e42467f287 McGuire        Patrick C.  NA         ##  5 c9706a92-0e5f-46c1-96d8-20e42467f287 Xuei           Xiaoling    NA         ##  6 c9706a92-0e5f-46c1-96d8-20e42467f287 Wan            Jun         NA         ##  7 c9706a92-0e5f-46c1-96d8-20e42467f287 Liu            Yunlong     NA         ##  8 c9706a92-0e5f-46c1-96d8-20e42467f287 Althouse       Sandra K.   NA         ##  9 c9706a92-0e5f-46c1-96d8-20e42467f287 Colter         Austyn      NA         ## 10 c9706a92-0e5f-46c1-96d8-20e42467f287 Sandusky       George      NA         ## 11 c9706a92-0e5f-46c1-96d8-20e42467f287 Storniolo      Anna Maria  NA         ## 12 c9706a92-0e5f-46c1-96d8-20e42467f287 Nakshatri      Harikrishna NA external_links <- links(db) external_links ## # A tibble: 698 × 4 ##    collection_id                        link_name link_type link_url             ##    <chr>                                <chr>     <chr>     <chr>                ##  1 2b02dff7-e427-4cdc-96fb-c0f354c099aa NA        RAW_DATA  https://www.ncbi.nl… ##  2 2b02dff7-e427-4cdc-96fb-c0f354c099aa NA        DOI       https://doi.org/10.… ##  3 2b02dff7-e427-4cdc-96fb-c0f354c099aa NA        OTHER     https://github.com/… ##  4 2b02dff7-e427-4cdc-96fb-c0f354c099aa NA        OTHER     https://scdissector… ##  5 2b02dff7-e427-4cdc-96fb-c0f354c099aa NA        RAW_DATA  https://data.humanc… ##  6 2b02dff7-e427-4cdc-96fb-c0f354c099aa NA        OTHER     https://www.ebi.ac.… ##  7 2b02dff7-e427-4cdc-96fb-c0f354c099aa NA        OTHER     https://cells.ucsc.… ##  8 03cdc7f4-bd08-49d0-a395-4487c0e5a168 NA        DOI       https://doi.org/10.… ##  9 03cdc7f4-bd08-49d0-a395-4487c0e5a168 GSE196638 RAW_DATA  https://www.ncbi.nl… ## 10 a72afd53-ab92-4511-88da-252fb0e26b9a NA        OTHER     https://github.com/… ## # ℹ 688 more rows external_links |>     count(link_type) ## # A tibble: 6 × 2 ##   link_type       n ##   <chr>       <int> ## 1 DATA_SOURCE    40 ## 2 DOI           138 ## 3 LAB_WEBSITE    33 ## 4 OTHER         254 ## 5 PROTOCOL       40 ## 6 RAW_DATA      193 external_links |>     filter(collection_id == collection_id_of_interest) ## # A tibble: 3 × 4 ##   collection_id                        link_name link_type link_url              ##   <chr>                                <chr>     <chr>     <chr>                 ## 1 c9706a92-0e5f-46c1-96d8-20e42467f287 NA        RAW_DATA  https://data.humance… ## 2 c9706a92-0e5f-46c1-96d8-20e42467f287 NA        RAW_DATA  https://www.ncbi.nlm… ## 3 c9706a92-0e5f-46c1-96d8-20e42467f287 NA        DOI       https://doi.org/10.1… doi_of_interest <- \"https://doi.org/10.1016/j.xcrm.2021.100219\" links(db) |>     filter(link_type == \"DOI\" & link_url == doi_of_interest) |>     left_join(collections(db)) |>     glimpse() ## Joining with `by = join_by(collection_id)` ## Rows: 1 ## Columns: 18 ## $ collection_id                  <chr> \"c9706a92-0e5f-46c1-96d8-20e42467f287\" ## $ link_name                      <chr> NA ## $ link_type                      <chr> \"DOI\" ## $ link_url                       <chr> \"https://doi.org/10.1016/j.xcrm.2021.10… ## $ access_type                    <chr> \"READ\" ## $ consortia                      <list> [\"CZI Single-Cell Biology\"] ## $ contact_email                  <chr> \"hnakshat@iupui.edu\" ## $ contact_name                   <chr> \"Harikrishna Nakshatri\" ## $ curator_name                   <chr> \"Jennifer Yu-Sheng Chien\" ## $ data_submission_policy_version <chr> \"1.0\" ## $ description                    <chr> \"Single-cell RNA sequencing (scRNA-seq)… ## $ links                          <list> [[\"\", \"RAW_DATA\", \"https://data.humance… ## $ name                           <chr> \"A single-cell atlas of the healthy bre… ## $ publisher_metadata             <list> [[[\"Bhat-Nakshatri\", \"Poornima\"], [\"Gao… ## $ visibility                     <chr> \"PUBLIC\" ## $ created_at                     <date> 2023-02-16 ## $ published_at                   <date> 2021-03-25 ## $ updated_at                     <date> 2023-02-16"},{"path":"https://mtmorgan.github.io/cellxgenedp/articles/using_cellxgenedp.html","id":"visualizing-data-in-cellxgene","dir":"Articles","previous_headings":"","what":"Visualizing data in cellxgene","title":"Discover and download datasets and files from the cellxgene data portal","text":"Discover files associated first selected dataset filetype column lists type file. cellxgene service can used visualize datasets CXG files. Visualization interactive process, datasets_visualize() open 5 browser tabs per call.","code":"selected_files <-     left_join(         african_american_female |> select(dataset_id),         files(db),         by = \"dataset_id\"     ) selected_files ## # A tibble: 128 × 8 ##    dataset_id         file_id filename filetype s3_uri user_submitted created_at ##    <chr>              <chr>   <chr>    <chr>    <chr>  <lgl>          <date>     ##  1 8693bc2c-d84f-450… ceabe8… \"raw.h5… RAW_H5AD s3://… TRUE           1970-01-01 ##  2 8693bc2c-d84f-450… 0a9773… \"local.… H5AD     s3://… TRUE           1970-01-01 ##  3 8693bc2c-d84f-450… 03225d… \"local.… RDS      s3://… TRUE           1970-01-01 ##  4 8693bc2c-d84f-450… acd81a… \"\"       CXG      s3://… TRUE           1970-01-01 ##  5 37f30005-8a5c-4bd… 62073a… \"raw.h5… RAW_H5AD s3://… TRUE           1970-01-01 ##  6 37f30005-8a5c-4bd… 1ada04… \"local.… H5AD     s3://… TRUE           1970-01-01 ##  7 37f30005-8a5c-4bd… 0808a4… \"\"       CXG      s3://… TRUE           1970-01-01 ##  8 37f30005-8a5c-4bd… cabcb8… \"local.… RDS      s3://… TRUE           1970-01-01 ##  9 54914718-c0d3-4e1… 92372d… \"raw.h5… RAW_H5AD s3://… TRUE           1970-01-01 ## 10 54914718-c0d3-4e1… b642b4… \"local.… H5AD     s3://… TRUE           1970-01-01 ## # ℹ 118 more rows ## # ℹ 1 more variable: updated_at <date> selected_files |>     filter(filetype == \"CXG\") |>     slice(1) |> # visualize a single dataset     datasets_visualize()"},{"path":"https://mtmorgan.github.io/cellxgenedp/articles/using_cellxgenedp.html","id":"file-download-and-use","dir":"Articles","previous_headings":"","what":"File download and use","title":"Discover and download datasets and files from the cellxgene data portal","text":"Datasets usually contain CXG (cellxgene visualization), H5AD (files produced python AnnData module), Rds (serialized files produced R Seurat package). public parsers CXG, Rds files may unreadable version Seurat used create file different version used read file. therefore focus H5AD files. illustration, download one selected files. downloaded local cache (use internal function cellxgenedp:::.cellxgenedb_cache_path() location cache), process time-consuming first time. H5AD files can converted R / Bioconductor objects using zellkonverter package. SingleCellExperiment object matrix-like object rows corresponding genes columns cells. Thus can easily explore cells present data.","code":"local_file <-     selected_files |>     filter(         dataset_id == \"24205601-0780-4bf2-b1d9-0e3cacbc2cd6\",         filetype == \"H5AD\"     ) |>     files_download(dry.run = FALSE) basename(local_file) ## [1] \"15e9d9af-60dc-4897-88e4-89842655d6b8.H5AD\" h5ad <- readH5AD(local_file, use_hdf5 = TRUE) ## + '/home/runner/.cache/R/basilisk/1.12.0/0/bin/conda' 'create' '--yes' '--prefix' '/home/runner/.cache/R/basilisk/1.12.0/zellkonverter/1.10.1/zellkonverterAnnDataEnv-0.8.0' 'python=3.8.13' '--quiet' '-c' 'conda-forge' ## + '/home/runner/.cache/R/basilisk/1.12.0/0/bin/conda' 'install' '--yes' '--prefix' '/home/runner/.cache/R/basilisk/1.12.0/zellkonverter/1.10.1/zellkonverterAnnDataEnv-0.8.0' 'python=3.8.13' ## + '/home/runner/.cache/R/basilisk/1.12.0/0/bin/conda' 'install' '--yes' '--prefix' '/home/runner/.cache/R/basilisk/1.12.0/zellkonverter/1.10.1/zellkonverterAnnDataEnv-0.8.0' '-c' 'conda-forge' 'python=3.8.13' 'anndata=0.8.0' 'h5py=3.6.0' 'hdf5=1.12.1' 'natsort=8.1.0' 'numpy=1.22.3' 'packaging=21.3' 'pandas=1.4.2' 'python=3.8.13' 'scipy=1.7.3' 'sqlite=3.38.2' h5ad ## class: SingleCellExperiment  ## dim: 33234 31696  ## metadata(3): default_embedding schema_version title ## assays(1): X ## rownames(33234): ENSG00000243485 ENSG00000237613 ... ENSG00000277475 ##   ENSG00000268674 ## rowData names(4): feature_is_filtered feature_name feature_reference ##   feature_biotype ## colnames(31696): CMGpool_AAACCCAAGGACAACC CMGpool_AAACCCACAATCTCTT ... ##   K109064_TTTGTTGGTTGCATCA K109064_TTTGTTGGTTGGACCC ## colData names(34): donor_id self_reported_ethnicity_ontology_term_id ##   ... self_reported_ethnicity development_stage ## reducedDimNames(3): X_pca X_tsne X_umap ## mainExpName: NULL ## altExpNames(0): h5ad |>     colData(h5ad) |>     as_tibble() |>     count(sex, donor_id) ## # A tibble: 7 × 3 ##   sex    donor_id                     n ##   <fct>  <fct>                    <int> ## 1 female D1                        2303 ## 2 female D2                         864 ## 3 female D3                        2517 ## 4 female D4                        1771 ## 5 female D5                        2244 ## 6 female D11                       7454 ## 7 female pooled [D9,D7,D8,D10,D6] 14543"},{"path":"https://mtmorgan.github.io/cellxgenedp/articles/using_cellxgenedp.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next steps","title":"Discover and download datasets and files from the cellxgene data portal","text":"Orchestrating Single-Cell Analysis Bioconductor online resource provides excellent introduction analysis visualization single-cell data R / Bioconductor. Extensive opportunities working AnnData objects R using native python interface briefly described , e.g., ?AnnData2SCE help page zellkonverter. hca package provides programmatic access Human Cell Atlas data portal, allowing retrieval primary well derived single-cell data files.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/articles/using_cellxgenedp.html","id":"session-info","dir":"Articles","previous_headings":"","what":"Session info","title":"Discover and download datasets and files from the cellxgene data portal","text":"","code":"## R version 4.3.1 (2023-06-16) ## Platform: x86_64-pc-linux-gnu (64-bit) ## Running under: Ubuntu 22.04.2 LTS ##  ## Matrix products: default ## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  ## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0 ##  ## locale: ##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        ##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    ##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           ## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C    ##  ## time zone: UTC ## tzcode source: system (glibc) ##  ## attached base packages: ## [1] stats4    stats     graphics  grDevices utils     datasets  methods   ## [8] base      ##  ## other attached packages: ##  [1] cellxgenedp_1.5.1           dplyr_1.1.2                 ##  [3] SingleCellExperiment_1.22.0 SummarizedExperiment_1.30.2 ##  [5] Biobase_2.60.0              GenomicRanges_1.52.0        ##  [7] GenomeInfoDb_1.36.1         IRanges_2.34.1              ##  [9] S4Vectors_0.38.1            BiocGenerics_0.46.0         ## [11] MatrixGenerics_1.12.2       matrixStats_1.0.0           ## [13] zellkonverter_1.10.1        BiocStyle_2.28.0            ##  ## loaded via a namespace (and not attached): ##  [1] tidyselect_1.2.0        filelock_1.0.2          bitops_1.0-7            ##  [4] fastmap_1.1.1           RCurl_1.98-1.12         promises_1.2.0.1        ##  [7] digest_0.6.31           mime_0.12               lifecycle_1.0.3         ## [10] ellipsis_0.3.2          magrittr_2.0.3          compiler_4.3.1          ## [13] rlang_1.1.1             sass_0.4.6              tools_4.3.1             ## [16] utf8_1.2.3              yaml_2.3.7              knitr_1.43              ## [19] S4Arrays_1.0.4          htmlwidgets_1.6.2       curl_5.0.1              ## [22] reticulate_1.30         here_1.0.1              DelayedArray_0.26.3     ## [25] HDF5Array_1.28.1        withr_2.5.0             purrr_1.0.1             ## [28] desc_1.4.2              grid_4.3.1              fansi_1.0.4             ## [31] xtable_1.8-4            Rhdf5lib_1.22.0         cli_3.6.1               ## [34] rmarkdown_2.22          crayon_1.5.2            ragg_1.2.5              ## [37] generics_0.1.3          httr_1.4.6              rhdf5_2.44.0            ## [40] cachem_1.0.8            stringr_1.5.0           zlibbioc_1.46.0         ## [43] parallel_4.3.1          BiocManager_1.30.21     XVector_0.40.0          ## [46] basilisk_1.12.0         vctrs_0.6.3             Matrix_1.5-4.1          ## [49] jsonlite_1.8.5          dir.expiry_1.8.0        bookdown_0.34           ## [52] systemfonts_1.0.4       jquerylib_0.1.4         glue_1.6.2              ## [55] pkgdown_2.0.7           DT_0.28                 stringi_1.7.12          ## [58] later_1.3.1             tibble_3.2.1            pillar_1.9.0            ## [61] rhdf5filters_1.12.1     basilisk.utils_1.12.1   htmltools_0.5.5         ## [64] GenomeInfoDbData_1.2.10 R6_2.5.1                textshaping_0.3.6       ## [67] rprojroot_2.0.3         evaluate_0.21           shiny_1.7.4             ## [70] lattice_0.21-8          png_0.1-8               memoise_2.0.1           ## [73] httpuv_1.6.11           bslib_0.5.0             rjsoncons_1.0.0         ## [76] Rcpp_1.0.10             xfun_0.39               fs_1.6.2                ## [79] pkgconfig_2.0.3"},{"path":"https://mtmorgan.github.io/cellxgenedp/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Martin Morgan. Author, maintainer. Kayla Interdonato. Author.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Morgan M, Interdonato K (2023). cellxgenedp: Discover Access Single Cell Data Sets cellxgene Data Portal. R package version 1.5.1, https://mtmorgan.github.io/cellxgenedp/.","code":"@Manual{,   title = {cellxgenedp: Discover and Access Single Cell Data Sets in the cellxgene Data Portal},   author = {Martin Morgan and Kayla Interdonato},   year = {2023},   note = {R package version 1.5.1},   url = {https://mtmorgan.github.io/cellxgenedp/}, }"},{"path":"https://mtmorgan.github.io/cellxgenedp/index.html","id":"installation-and-use","dir":"","previous_headings":"","what":"Discover and Access Single Cell Data Sets in the cellxgene Data Portal","title":"Discover and Access Single Cell Data Sets in the cellxgene Data Portal","text":"package available Bioconductor version 3.15 later. following code installs cellxgenedp well packages required vignette. Use following pkgs vector install GitHub (latest, unchecked, development version) instead Load package current R session. make extensive use dplyr packages, end vignette use SingleCellExperiment zellkonverter, load well.","code":"pkgs <- c(\"cellxgenedp\", \"zellkonverter\", \"SingleCellExperiment\", \"HDF5Array\") required_pkgs <- pkgs[!pkgs %in% rownames(installed.packages())] BiocManager::install(required_pkgs) pkgs <- c(     \"mtmorgan/cellxgenedp\", \"zellkonverter\", \"SingleCellExperiment\", \"HDF5Array\" ) suppressPackageStartupMessages({     library(zellkonverter)     library(SingleCellExperiment) # load early to avoid masking dplyr::count()     library(dplyr)     library(cellxgenedp) })"},{"path":"https://mtmorgan.github.io/cellxgenedp/index.html","id":"cxg-provides-a-shiny-interface","dir":"","previous_headings":"","what":"cxg() Provides a ‘shiny’ interface","title":"Discover and Access Single Cell Data Sets in the cellxgene Data Portal","text":"following sections outline use cellxgenedp package R script; functionality also available cxg() shiny application, providing easy way identify, download, visualize one several datasets. Start app choose project first tab, dataset visualization, one datasets download!","code":"cxg()"},{"path":"https://mtmorgan.github.io/cellxgenedp/index.html","id":"collections-datasets-and-files","dir":"","previous_headings":"","what":"Collections, datasets and files","title":"Discover and Access Single Cell Data Sets in the cellxgene Data Portal","text":"Retrieve metadata resources available cellxgene data portal using db(): Printing db object provides brief overview available data, well hints, form functions like collections(), exploration. portal organizes data hierarchically, ‘collections’ (research studies, approximately), ‘datasets’, ‘files’. Discover data using corresponding functions. resources unique primary identifier (e.g., file_id) well identifier describing relationship resource components database (e.g., dataset_id). identifiers can used ‘join’ information across tables.","code":"db <- db() db #> cellxgene_db #> number of collections(): 119 #> number of datasets(): 706 #> number of files(): 2813 collections(db) #> # A tibble: 119 × 15 #>    collec…¹ acces…² conso…³ conta…⁴ conta…⁵ curat…⁶ data_…⁷ descr…⁸ links  name  #>    <chr>    <chr>   <lgl>   <chr>   <chr>   <chr>   <chr>   <chr>   <list> <chr> #>  1 43d4bb3… READ    NA      raymon… Raymon… Batuha… 1.0     Pertur… <list> Tran… #>  2 0434a9d… READ    NA      avilla… Alexan… Batuha… 1.0     The va… <list> Acut… #>  3 03cdc7f… READ    NA      tien.p… Tien P… Jason … 1.0     scRNA-… <lgl>  Emph… #>  4 2902f08… READ    NA      lopes@… S. M. … Wei Kh… 1.0     The ov… <list> Sing… #>  5 83ed3be… READ    NA      tom.ta… Tom Ta… Jennif… 1.0     During… <list> Inte… #>  6 eb735cc… READ    NA      rv4@sa… Roser … Batuha… 1.0     Human … <list> Samp… #>  7 44531dd… READ    NA      tallul… Tallul… Jennif… 1.0     The cr… <list> Sing… #>  8 e75342a… READ    NA      nhuebn… Norber… Jennif… 1.0     Pathog… <list> Path… #>  9 64b24fd… READ    NA      magnes… Scott … Rachel… 1.0     Single… <list> A pr… #> 10 125eef5… READ    NA      my4@sa… Matthe… Jason … 1.0     Unders… <list> Sing… #> # … with 109 more rows, 5 more variables: publisher_metadata <list>, #> #   visibility <chr>, created_at <date>, published_at <date>, #> #   updated_at <date>, and abbreviated variable names ¹​collection_id, #> #   ²​access_type, ³​consortia, ⁴​contact_email, ⁵​contact_name, ⁶​curator_name, #> #   ⁷​data_submission_policy_version, ⁸​description  datasets(db) #> # A tibble: 706 × 26 #>    dataset_id     colle…¹ donor…² assay  cell_…³ cell_…⁴ datas…⁵ devel…⁶ disease #>    <chr>          <chr>   <list>  <list>   <int> <list>  <chr>   <list>  <list>  #>  1 d62144d1-6e98… 43d4bb… <list>  <list>   68036 <list>  https:… <list>  <list>  #>  2 07f8f239-2136… 0434a9… <list>  <list>   59506 <list>  https:… <list>  <list>  #>  3 9aca7e29-d19c… 03cdc7… <list>  <list>   35699 <list>  https:… <list>  <list>  #>  4 731aeab6-e1d6… 03cdc7… <list>  <list>    3662 <list>  https:… <list>  <list>  #>  5 bfdafcbc-d785… 03cdc7… <list>  <list>   18386 <list>  https:… <list>  <list>  #>  6 218af677-b80b… 2902f0… <list>  <list>   20676 <list>  https:… <list>  <list>  #>  7 9e11bf54-0ea6… 83ed3b… <list>  <list>   71732 <list>  https:… <list>  <list>  #>  8 a0b9d32b-4085… eb735c… <list>  <list>   97499 <list>  https:… <list>  <list>  #>  9 5daeaafe-c79e… 44531d… <list>  <list>     146 <list>  https:… <list>  <list>  #> 10 cc607851-8820… 44531d… <list>  <list>    2346 <list>  https:… <list>  <list>  #> # … with 696 more rows, 17 more variables: is_primary_data <chr>, #> #   is_valid <lgl>, mean_genes_per_cell <dbl>, name <chr>, organism <list>, #> #   processing_status <list>, published <lgl>, revision <int>, #> #   schema_version <chr>, self_reported_ethnicity <list>, sex <list>, #> #   suspension_type <list>, tissue <list>, tombstone <lgl>, created_at <date>, #> #   published_at <date>, updated_at <date>, and abbreviated variable names #> #   ¹​collection_id, ²​donor_id, ³​cell_count, ⁴​cell_type, ⁵​dataset_deployments, …  files(db) #> # A tibble: 2,813 × 8 #>    file_id          datas…¹ filen…² filet…³ s3_uri user_…⁴ created_at updated_at #>    <chr>            <chr>   <chr>   <chr>   <chr>  <lgl>   <date>     <date>     #>  1 87ce2086-f2eb-4… d62144… \"raw.h… RAW_H5… s3://… TRUE    1970-01-01 1970-01-01 #>  2 8eabe485-be71-4… d62144… \"local… H5AD    s3://… TRUE    1970-01-01 1970-01-01 #>  3 33dfa406-132a-4… d62144… \"local… RDS     s3://… TRUE    1970-01-01 1970-01-01 #>  4 454e0b3c-e207-4… d62144… \"\"      CXG     s3://… TRUE    1970-01-01 1970-01-01 #>  5 62deea2a-d722-4… 07f8f2… \"raw.h… RAW_H5… s3://… TRUE    1970-01-01 1970-01-01 #>  6 b50c48f1-ef5e-4… 07f8f2… \"local… H5AD    s3://… TRUE    1970-01-01 1970-01-01 #>  7 59309f21-0db8-4… 07f8f2… \"local… RDS     s3://… TRUE    1970-01-01 1970-01-01 #>  8 399c2655-f56a-4… 07f8f2… \"\"      CXG     s3://… TRUE    1970-01-01 1970-01-01 #>  9 1ca25a06-7251-4… 9aca7e… \"raw.h… RAW_H5… s3://… TRUE    1970-01-01 1970-01-01 #> 10 a2dd5b48-98df-4… 9aca7e… \"local… H5AD    s3://… TRUE    1970-01-01 1970-01-01 #> # … with 2,803 more rows, and abbreviated variable names ¹​dataset_id, #> #   ²​filename, ³​filetype, ⁴​user_submitted"},{"path":"https://mtmorgan.github.io/cellxgenedp/index.html","id":"using-dplyr-to-navigate-data","dir":"","previous_headings":"","what":"Using dplyr to navigate data","title":"Discover and Access Single Cell Data Sets in the cellxgene Data Portal","text":"collection may several datasets, datasets may several files. instance, collection datasets can find collection joining collections() table. can take similar strategy identify datasets belonging collection","code":"collection_with_most_datasets <-     datasets(db) |>     count(collection_id, sort = TRUE) |>     slice(1) left_join(     collection_with_most_datasets |> select(collection_id),     collections(db),     by = \"collection_id\" ) |> glimpse() #> Rows: 1 #> Columns: 15 #> $ collection_id                  <chr> \"283d65eb-dd53-496d-adb7-7570c7caa443\" #> $ access_type                    <chr> \"READ\" #> $ consortia                      <lgl> NA #> $ contact_email                  <chr> \"kimberly.siletti@ki.se\" #> $ contact_name                   <chr> \"Kimberly Siletti\" #> $ curator_name                   <chr> \"James Chaffer\" #> $ data_submission_policy_version <chr> \"1.0\" #> $ description                    <chr> \"The human brain directs a wide range o… #> $ links                          <list> [[\"\", \"RAW_DATA\", \"http://data.nemoarch… #> $ name                           <chr> \"Transcriptomic diversity of cell types… #> $ publisher_metadata             <list> [[[\"Siletti\", \"Kimberly\"], [\"Hodge\", \"R… #> $ visibility                     <chr> \"PUBLIC\" #> $ created_at                     <date> 2022-11-09 #> $ published_at                   <date> 2022-12-09 #> $ updated_at                     <date> 2022-12-09 left_join(     collection_with_most_datasets |> select(collection_id),     datasets(db),     by = \"collection_id\" ) #> Warning in left_join(select(collection_with_most_datasets, collection_id), : Each row in `x` is expected to match at most 1 row in `y`. #> ℹ Row 1 of `x` matches multiple rows. #> ℹ If multiple matches are expected, set `multiple = \"all\"` to silence this #>   warning. #> # A tibble: 138 × 26 #>    collection_id  datas…¹ donor…² assay  cell_…³ cell_…⁴ datas…⁵ devel…⁶ disease #>    <chr>          <chr>   <list>  <list>   <int> <list>  <chr>   <list>  <list>  #>  1 283d65eb-dd53… 4fb0cd… <list>  <list>   25071 <list>  https:… <list>  <list>  #>  2 283d65eb-dd53… d15266… <list>  <list>   35290 <list>  https:… <list>  <list>  #>  3 283d65eb-dd53… f4c89e… <list>  <list>   38331 <list>  https:… <list>  <list>  #>  4 283d65eb-dd53… fb3dee… <list>  <list>   21534 <list>  https:… <list>  <list>  #>  5 283d65eb-dd53… 7e0f26… <list>  <list>    9932 <list>  https:… <list>  <list>  #>  6 283d65eb-dd53… 0834c8… <list>  <list>   28724 <list>  https:… <list>  <list>  #>  7 283d65eb-dd53… 4cce2e… <list>  <list>   35359 <list>  https:… <list>  <list>  #>  8 283d65eb-dd53… 05dd9b… <list>  <list>   27210 <list>  https:… <list>  <list>  #>  9 283d65eb-dd53… 5b994d… <list>  <list>   26172 <list>  https:… <list>  <list>  #> 10 283d65eb-dd53… dab53e… <list>  <list>   34933 <list>  https:… <list>  <list>  #> # … with 128 more rows, 17 more variables: is_primary_data <chr>, #> #   is_valid <lgl>, mean_genes_per_cell <dbl>, name <chr>, organism <list>, #> #   processing_status <list>, published <lgl>, revision <int>, #> #   schema_version <chr>, self_reported_ethnicity <list>, sex <list>, #> #   suspension_type <list>, tissue <list>, tombstone <lgl>, created_at <date>, #> #   published_at <date>, updated_at <date>, and abbreviated variable names #> #   ¹​dataset_id, ²​donor_id, ³​cell_count, ⁴​cell_type, ⁵​dataset_deployments, …"},{"path":"https://mtmorgan.github.io/cellxgenedp/index.html","id":"facets-provides-information-on-levels-present-in-specific-columns","dir":"","previous_headings":"","what":"facets() provides information on ‘levels’ present in specific columns","title":"Discover and Access Single Cell Data Sets in the cellxgene Data Portal","text":"Notice columns ‘lists’ rather atomic vectors like ‘character’ ‘integer’. indicates least datasets one type assay, cell_type, etc. facets() function provides convenient way discovering possible levels column, e.g., assay, organism, self_reported_ethnicity, sex, number datasets label.","code":"datasets(db) |>     select(where(is.list)) #> # A tibble: 706 × 11 #>    donor_id   assay  cell_…¹ devel…² disease organ…³ processing…⁴ self_…⁵ sex    #>    <list>     <list> <list>  <list>  <list>  <list>  <list>       <list>  <list> #>  1 <list [9]> <list> <list>  <list>  <list>  <list>  <named list> <list>  <list> #>  2 <list>     <list> <list>  <list>  <list>  <list>  <named list> <list>  <list> #>  3 <list [6]> <list> <list>  <list>  <list>  <list>  <named list> <list>  <list> #>  4 <list [6]> <list> <list>  <list>  <list>  <list>  <named list> <list>  <list> #>  5 <list [6]> <list> <list>  <list>  <list>  <list>  <named list> <list>  <list> #>  6 <list [5]> <list> <list>  <list>  <list>  <list>  <named list> <list>  <list> #>  7 <list [5]> <list> <list>  <list>  <list>  <list>  <named list> <list>  <list> #>  8 <list>     <list> <list>  <list>  <list>  <list>  <named list> <list>  <list> #>  9 <list [4]> <list> <list>  <list>  <list>  <list>  <named list> <list>  <list> #> 10 <list [4]> <list> <list>  <list>  <list>  <list>  <named list> <list>  <list> #> # … with 696 more rows, 2 more variables: suspension_type <list>, #> #   tissue <list>, and abbreviated variable names ¹​cell_type, #> #   ²​development_stage, ³​organism, ⁴​processing_status, ⁵​self_reported_ethnicity facets(db, \"assay\") #> # A tibble: 32 × 4 #>    facet label                          ontology_term_id     n #>    <chr> <chr>                          <chr>            <int> #>  1 assay 10x 3' v3                      EFO:0009922        346 #>  2 assay 10x 3' v2                      EFO:0009899        170 #>  3 assay Slide-seqV2                    EFO:0030062        129 #>  4 assay 10x 5' v1                      EFO:0011025         48 #>  5 assay Smart-seq2                     EFO:0008931         38 #>  6 assay Visium Spatial Gene Expression EFO:0010961         35 #>  7 assay 10x multiome                   EFO:0030059         24 #>  8 assay Drop-seq                       EFO:0008722         12 #>  9 assay 10x 3' transcription profiling EFO:0030003          9 #> 10 assay 10x 5' v2                      EFO:0009900          9 #> # … with 22 more rows facets(db, \"self_reported_ethnicity\") #> # A tibble: 18 × 4 #>    facet                   label                                   ontol…¹     n #>    <chr>                   <chr>                                   <chr>   <int> #>  1 self_reported_ethnicity unknown                                 unknown   358 #>  2 self_reported_ethnicity European                                HANCES…   200 #>  3 self_reported_ethnicity na                                      na        184 #>  4 self_reported_ethnicity Asian                                   HANCES…    81 #>  5 self_reported_ethnicity African American                        HANCES…    39 #>  6 self_reported_ethnicity multiethnic                             multie…    25 #>  7 self_reported_ethnicity Greater Middle Eastern  (Middle Easter… HANCES…    21 #>  8 self_reported_ethnicity Hispanic or Latin American              HANCES…    16 #>  9 self_reported_ethnicity African American or Afro-Caribbean      HANCES…    10 #> 10 self_reported_ethnicity East Asian                              HANCES…     4 #> 11 self_reported_ethnicity African                                 HANCES…     3 #> 12 self_reported_ethnicity South Asian                             HANCES…     2 #> 13 self_reported_ethnicity Chinese                                 HANCES…     1 #> 14 self_reported_ethnicity Eskimo                                  HANCES…     1 #> 15 self_reported_ethnicity Finnish                                 HANCES…     1 #> 16 self_reported_ethnicity Han Chinese                             HANCES…     1 #> 17 self_reported_ethnicity Oceanian                                HANCES…     1 #> 18 self_reported_ethnicity Pacific Islander                        HANCES…     1 #> # … with abbreviated variable name ¹​ontology_term_id facets(db, \"sex\") #> # A tibble: 3 × 4 #>   facet label   ontology_term_id     n #>   <chr> <chr>   <chr>            <int> #> 1 sex   male    PATO:0000384       614 #> 2 sex   female  PATO:0000383       371 #> 3 sex   unknown unknown             54"},{"path":"https://mtmorgan.github.io/cellxgenedp/index.html","id":"filtering-faceted-columns","dir":"","previous_headings":"","what":"Filtering faceted columns","title":"Discover and Access Single Cell Data Sets in the cellxgene Data Portal","text":"Suppose interested finding datasets 10x 3’ v3 assay (ontology_term_id EFO:0009922) containing individuals African American ethnicity, female sex. Use facets_filter() utility function filter data sets needed Use nrow(african_american_female) find number datasets satisfying criteria. looks like cells sequenced (dataset may contain cells several ethnicities, well males individuals unknown gender, know actual number cells available without downloading files). Use left_join identify corresponding collections:","code":"african_american_female <-     datasets(db) |>     filter(         facets_filter(assay, \"ontology_term_id\", \"EFO:0009922\"),         facets_filter(self_reported_ethnicity, \"label\", \"African American\"),         facets_filter(sex, \"label\", \"female\")     ) african_american_female |>     summarise(total_cell_count = sum(cell_count)) #> # A tibble: 1 × 1 #>   total_cell_count #>              <int> #> 1          2657433 ## collections left_join(     african_american_female |> select(collection_id) |> distinct(),     collections(db),     by = \"collection_id\" ) #> # A tibble: 8 × 15 #>   collect…¹ acces…² conso…³ conta…⁴ conta…⁵ curat…⁶ data_…⁷ descr…⁸ links  name  #>   <chr>     <chr>   <lgl>   <chr>   <chr>   <chr>   <chr>   <chr>   <list> <chr> #> 1 c9706a92… READ    NA      hnaksh… Harikr… Jennif… 1.0     \"Singl… <list> A si… #> 2 2f75d249… READ    NA      rsatij… Rahul … Jennif… 1.0     \"This … <list> Azim… #> 3 62e8f058… READ    NA      chanj3… Joseph… Jennif… 1.0     \"155,0… <list> HTAN… #> 4 625f6bf4… READ    NA      a5wang… Allen … Jennif… 1.0     \"Large… <list> Lung… #> 5 b953c942… READ    NA      icobos… Inma C… Jennif… 1.0     \"Tau a… <list> Sing… #> 6 bcb61471… READ    NA      info@k… KPMP    Jennif… 1.0     \"Under… <list> An a… #> 7 b9fc3d70… READ    NA      bruce.… Bruce … Jennif… 1.0     \"Numer… <list> A We… #> 8 a98b828a… READ    NA      markus… Markus… Jennif… 1.0     \"Tumor… <list> HCA … #> # … with 5 more variables: publisher_metadata <list>, visibility <chr>, #> #   created_at <date>, published_at <date>, updated_at <date>, and abbreviated #> #   variable names ¹​collection_id, ²​access_type, ³​consortia, ⁴​contact_email, #> #   ⁵​contact_name, ⁶​curator_name, ⁷​data_submission_policy_version, ⁸​description"},{"path":"https://mtmorgan.github.io/cellxgenedp/index.html","id":"publication-and-other-external-data","dir":"","previous_headings":"","what":"Publication and other external data","title":"Discover and Access Single Cell Data Sets in the cellxgene Data Portal","text":"Many collections include publication information external data. information available return value collections(), helper function publisher_metadata(), authors(), links() may facilite access. Suppose one interested publication “single-cell atlas healthy breast tissues reveals clinically relevant clusters breast epithelial cells”. Discover collections Use collection_id extract publisher metadata (including DOI available) author information Collections may links additional external data, case DOI two links RAW_DATA. Conversely, knowledge DOI, etc., can used discover details corresponding collection.","code":"title_of_interest <- paste(     \"A single-cell atlas of the healthy breast tissues reveals clinically\",     \"relevant clusters of breast epithelial cells\" ) collection_of_interest <-     collections(db) |>     dplyr::filter(startsWith(name, title_of_interest)) collection_of_interest |>     glimpse() #> Rows: 1 #> Columns: 15 #> $ collection_id                  <chr> \"c9706a92-0e5f-46c1-96d8-20e42467f287\" #> $ access_type                    <chr> \"READ\" #> $ consortia                      <lgl> NA #> $ contact_email                  <chr> \"hnakshat@iupui.edu\" #> $ contact_name                   <chr> \"Harikrishna Nakshatri\" #> $ curator_name                   <chr> \"Jennifer Yu-Sheng Chien\" #> $ data_submission_policy_version <chr> \"1.0\" #> $ description                    <chr> \"Single-cell RNA sequencing (scRNA-seq)… #> $ links                          <list> [[\"\", \"RAW_DATA\", \"https://data.humance… #> $ name                           <chr> \"A single-cell atlas of the healthy bre… #> $ publisher_metadata             <list> [[[\"Bhat-Nakshatri\", \"Poornima\"], [\"Gao… #> $ visibility                     <chr> \"PUBLIC\" #> $ created_at                     <date> 2021-03-25 #> $ published_at                   <date> 2021-03-25 #> $ updated_at                     <date> 2021-03-25 collection_id_of_interest <- pull(collection_of_interest, \"collection_id\") publisher_metadata(db) |>     filter(collection_id == collection_id_of_interest) |>     glimpse() #> Rows: 1 #> Columns: 9 #> $ collection_id   <chr> \"c9706a92-0e5f-46c1-96d8-20e42467f287\" #> $ name            <chr> \"A single-cell atlas of the healthy breast tissues rev… #> $ is_preprint     <lgl> FALSE #> $ journal         <chr> \"Cell Reports Medicine\" #> $ published_at    <date> 2021-03-01 #> $ published_year  <int> 2021 #> $ published_month <int> 3 #> $ published_day   <int> 1 #> $ doi             <chr> \"https://doi.org/10.1016/j.xcrm.2021.100219\" authors(db) |>     filter(collection_id == collection_id_of_interest) #> # A tibble: 12 × 4 #>    collection_id                        family         given       consortium #>    <chr>                                <chr>          <chr>       <chr>      #>  1 c9706a92-0e5f-46c1-96d8-20e42467f287 Bhat-Nakshatri Poornima    <NA>       #>  2 c9706a92-0e5f-46c1-96d8-20e42467f287 Gao            Hongyu      <NA>       #>  3 c9706a92-0e5f-46c1-96d8-20e42467f287 Sheng          Liu         <NA>       #>  4 c9706a92-0e5f-46c1-96d8-20e42467f287 McGuire        Patrick C.  <NA>       #>  5 c9706a92-0e5f-46c1-96d8-20e42467f287 Xuei           Xiaoling    <NA>       #>  6 c9706a92-0e5f-46c1-96d8-20e42467f287 Wan            Jun         <NA>       #>  7 c9706a92-0e5f-46c1-96d8-20e42467f287 Liu            Yunlong     <NA>       #>  8 c9706a92-0e5f-46c1-96d8-20e42467f287 Althouse       Sandra K.   <NA>       #>  9 c9706a92-0e5f-46c1-96d8-20e42467f287 Colter         Austyn      <NA>       #> 10 c9706a92-0e5f-46c1-96d8-20e42467f287 Sandusky       George      <NA>       #> 11 c9706a92-0e5f-46c1-96d8-20e42467f287 Storniolo      Anna Maria  <NA>       #> 12 c9706a92-0e5f-46c1-96d8-20e42467f287 Nakshatri      Harikrishna <NA> external_links <- links(db) external_links #> # A tibble: 586 × 4 #>    collection_id                        link_name                link_…¹ link_…² #>    <chr>                                <chr>                    <chr>   <chr>   #>  1 43d4bb39-21af-4d05-b973-4c1fed7b916c <NA>                     OTHER   http:/… #>  2 43d4bb39-21af-4d05-b973-4c1fed7b916c <NA>                     DOI     https:… #>  3 43d4bb39-21af-4d05-b973-4c1fed7b916c EGAS00001002927          DATA_S… https:… #>  4 0434a9d4-85fd-4554-b8e3-cf6c582bb2fa Purification of PBMCs    PROTOC… https:… #>  5 0434a9d4-85fd-4554-b8e3-cf6c582bb2fa <NA>                     DOI     https:… #>  6 0434a9d4-85fd-4554-b8e3-cf6c582bb2fa MGH COVID-19 Effort Blo… PROTOC… http:/… #>  7 0434a9d4-85fd-4554-b8e3-cf6c582bb2fa COVID Blood Processing … PROTOC… http:/… #>  8 0434a9d4-85fd-4554-b8e3-cf6c582bb2fa CITE-seq for PBMCs       PROTOC… https:… #>  9 0434a9d4-85fd-4554-b8e3-cf6c582bb2fa COVID Airway Processing… PROTOC… http:/… #> 10 0434a9d4-85fd-4554-b8e3-cf6c582bb2fa <NA>                     OTHER   https:… #> # … with 576 more rows, and abbreviated variable names ¹​link_type, ²​link_url external_links |>     count(link_type) #> # A tibble: 6 × 2 #>   link_type       n #>   <chr>       <int> #> 1 DATA_SOURCE    37 #> 2 DOI           115 #> 3 LAB_WEBSITE    31 #> 4 OTHER         205 #> 5 PROTOCOL       36 #> 6 RAW_DATA      162 external_links |>     filter(collection_id == collection_id_of_interest) #> # A tibble: 3 × 4 #>   collection_id                        link_name link_type link_url              #>   <chr>                                <chr>     <chr>     <chr>                 #> 1 c9706a92-0e5f-46c1-96d8-20e42467f287 <NA>      RAW_DATA  https://data.humance… #> 2 c9706a92-0e5f-46c1-96d8-20e42467f287 <NA>      DOI       https://doi.org/10.1… #> 3 c9706a92-0e5f-46c1-96d8-20e42467f287 <NA>      RAW_DATA  https://www.ncbi.nlm… doi_of_interest <- \"https://doi.org/10.1016/j.xcrm.2021.100219\" links(db) |>     filter(link_type == \"DOI\" & link_url == doi_of_interest) |>     left_join(collections(db)) |>     glimpse() #> Joining with `by = join_by(collection_id)` #> Rows: 1 #> Columns: 18 #> $ collection_id                  <chr> \"c9706a92-0e5f-46c1-96d8-20e42467f287\" #> $ link_name                      <chr> NA #> $ link_type                      <chr> \"DOI\" #> $ link_url                       <chr> \"https://doi.org/10.1016/j.xcrm.2021.10… #> $ access_type                    <chr> \"READ\" #> $ consortia                      <lgl> NA #> $ contact_email                  <chr> \"hnakshat@iupui.edu\" #> $ contact_name                   <chr> \"Harikrishna Nakshatri\" #> $ curator_name                   <chr> \"Jennifer Yu-Sheng Chien\" #> $ data_submission_policy_version <chr> \"1.0\" #> $ description                    <chr> \"Single-cell RNA sequencing (scRNA-seq)… #> $ links                          <list> [[\"\", \"RAW_DATA\", \"https://data.humance… #> $ name                           <chr> \"A single-cell atlas of the healthy bre… #> $ publisher_metadata             <list> [[[\"Bhat-Nakshatri\", \"Poornima\"], [\"Gao… #> $ visibility                     <chr> \"PUBLIC\" #> $ created_at                     <date> 2021-03-25 #> $ published_at                   <date> 2021-03-25 #> $ updated_at                     <date> 2021-03-25"},{"path":"https://mtmorgan.github.io/cellxgenedp/index.html","id":"visualizing-data-in-cellxgene","dir":"","previous_headings":"","what":"Visualizing data in cellxgene","title":"Discover and Access Single Cell Data Sets in the cellxgene Data Portal","text":"Discover files associated first selected dataset filetype column lists type file. cellxgene service can used visualize datasets CXG files. Visualization interactive process, datasets_visualize() open 5 browser tabs per call.","code":"selected_files <-     left_join(         african_american_female |> select(dataset_id),         files(db),         by = \"dataset_id\"     ) #> Warning in left_join(select(african_american_female, dataset_id), files(db), : Each row in `x` is expected to match at most 1 row in `y`. #> ℹ Row 1 of `x` matches multiple rows. #> ℹ If multiple matches are expected, set `multiple = \"all\"` to silence this #>   warning. selected_files #> # A tibble: 88 × 8 #>    dataset_id       file_id filen…¹ filet…² s3_uri user_…³ created_at updated_at #>    <chr>            <chr>   <chr>   <chr>   <chr>  <lgl>   <date>     <date>     #>  1 24205601-0780-4… e1c842… \"raw.h… RAW_H5… s3://… TRUE    1970-01-01 1970-01-01 #>  2 24205601-0780-4… 15e9d9… \"local… H5AD    s3://… TRUE    1970-01-01 1970-01-01 #>  3 24205601-0780-4… 0d3974… \"\"      CXG     s3://… TRUE    1970-01-01 1970-01-01 #>  4 24205601-0780-4… e254f9… \"local… RDS     s3://… TRUE    1970-01-01 1970-01-01 #>  5 d084f1e1-42f1-4… 59bd46… \"local… RDS     s3://… TRUE    1970-01-01 1970-01-01 #>  6 d084f1e1-42f1-4… 3a2467… \"\"      CXG     s3://… TRUE    1970-01-01 1970-01-01 #>  7 d084f1e1-42f1-4… d9f9d0… \"local… H5AD    s3://… TRUE    1970-01-01 1970-01-01 #>  8 d084f1e1-42f1-4… bee803… \"raw.h… RAW_H5… s3://… TRUE    1970-01-01 1970-01-01 #>  9 3f40e6b1-e280-4… e47e72… \"raw.h… RAW_H5… s3://… TRUE    1970-01-01 1970-01-01 #> 10 3f40e6b1-e280-4… d72756… \"local… H5AD    s3://… TRUE    1970-01-01 1970-01-01 #> # … with 78 more rows, and abbreviated variable names ¹​filename, ²​filetype, #> #   ³​user_submitted selected_files |>     filter(filetype == \"CXG\") |>     slice(1) |> # visualize a single dataset     datasets_visualize()"},{"path":"https://mtmorgan.github.io/cellxgenedp/index.html","id":"file-download-and-use","dir":"","previous_headings":"","what":"File download and use","title":"Discover and Access Single Cell Data Sets in the cellxgene Data Portal","text":"Datasets usually contain CXG (cellxgene visualization), H5AD (files produced python AnnData module), Rds (serialized files produced R Seurat package). public parsers CXG, Rds files may unreadable version Seurat used create file different version used read file. therefore focus H5AD files. illustration, download one selected files. downloaded local cache (use internal function cellxgenedp:::.cellxgenedb_cache_path() location cache), process time-consuming first time. H5AD files can converted R / Bioconductor objects using zellkonverter package. SingleCellExperiment object matrix-like object rows corresponding genes columns cells. Thus can easily explore cells present data.","code":"local_file <-     selected_files |>     filter(         dataset_id == \"24205601-0780-4bf2-b1d9-0e3cacbc2cd6\",         filetype == \"H5AD\"     ) |>     files_download(dry.run = FALSE) basename(local_file) #> [1] \"15e9d9af-60dc-4897-88e4-89842655d6b8.H5AD\" h5ad <- readH5AD(local_file, use_hdf5 = TRUE) #> + '/home/runner/.cache/R/basilisk/1.10.2/0/bin/conda' 'create' '--yes' '--prefix' '/home/runner/.cache/R/basilisk/1.10.2/zellkonverter/1.8.0/zellkonverterAnnDataEnv-0.8.0' 'python=3.8.13' '--quiet' '-c' 'conda-forge' #> + '/home/runner/.cache/R/basilisk/1.10.2/0/bin/conda' 'install' '--yes' '--prefix' '/home/runner/.cache/R/basilisk/1.10.2/zellkonverter/1.8.0/zellkonverterAnnDataEnv-0.8.0' 'python=3.8.13' #> + '/home/runner/.cache/R/basilisk/1.10.2/0/bin/conda' 'install' '--yes' '--prefix' '/home/runner/.cache/R/basilisk/1.10.2/zellkonverter/1.8.0/zellkonverterAnnDataEnv-0.8.0' '-c' 'conda-forge' 'python=3.8.13' 'anndata=0.8.0' 'h5py=3.6.0' 'hdf5=1.12.1' 'natsort=8.1.0' 'numpy=1.22.3' 'packaging=21.3' 'pandas=1.4.2' 'python=3.8.13' 'scipy=1.7.3' 'sqlite=3.38.2' #> Warning: 'X' matrix does not support transposition and has been skipped h5ad #> class: SingleCellExperiment  #> dim: 33234 31696  #> metadata(3): default_embedding schema_version title #> assays(1): X #> rownames(33234): ENSG00000243485 ENSG00000237613 ... ENSG00000277475 #>   ENSG00000268674 #> rowData names(4): feature_is_filtered feature_name feature_reference #>   feature_biotype #> colnames(31696): CMGpool_AAACCCAAGGACAACC CMGpool_AAACCCACAATCTCTT ... #>   K109064_TTTGTTGGTTGCATCA K109064_TTTGTTGGTTGGACCC #> colData names(34): donor_id self_reported_ethnicity_ontology_term_id #>   ... self_reported_ethnicity development_stage #> reducedDimNames(3): X_pca X_tsne X_umap #> mainExpName: NULL #> altExpNames(0): h5ad |>     colData(h5ad) |>     as_tibble() |>     count(sex, donor_id) #> # A tibble: 7 × 3 #>   sex    donor_id                     n #>   <fct>  <fct>                    <int> #> 1 female D1                        2303 #> 2 female D2                         864 #> 3 female D3                        2517 #> 4 female D4                        1771 #> 5 female D5                        2244 #> 6 female D11                       7454 #> 7 female pooled [D9,D7,D8,D10,D6] 14543"},{"path":"https://mtmorgan.github.io/cellxgenedp/index.html","id":"next-steps","dir":"","previous_headings":"","what":"Next steps","title":"Discover and Access Single Cell Data Sets in the cellxgene Data Portal","text":"Orchestrating Single-Cell Analysis Bioconductor online resource provides excellent introduction analysis visualization single-cell data R / Bioconductor. Extensive opportunities working AnnData objects R using native python interface briefly described , e.g., ?AnnData2SCE help page zellkonverter. hca package provides programmatic access Human Cell Atlas data portal, allowing retrieval primary well derived single-cell data files.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/index.html","id":"session-info","dir":"","previous_headings":"","what":"Session info","title":"Discover and Access Single Cell Data Sets in the cellxgene Data Portal","text":"","code":"#> R version 4.2.2 (2022-10-31) #> Platform: x86_64-pc-linux-gnu (64-bit) #> Running under: Ubuntu 22.04.1 LTS #>  #> Matrix products: default #> BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 #> LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so #>  #> locale: #>  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        #>  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    #>  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           #> [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C    #>  #> attached base packages: #> [1] stats4    stats     graphics  grDevices datasets  utils     methods   #> [8] base      #>  #> other attached packages: #>  [1] cellxgenedp_1.3.3           dplyr_1.1.0                 #>  [3] SingleCellExperiment_1.20.0 SummarizedExperiment_1.28.0 #>  [5] Biobase_2.58.0              GenomicRanges_1.50.2        #>  [7] GenomeInfoDb_1.34.9         IRanges_2.32.0              #>  [9] S4Vectors_0.36.1            BiocGenerics_0.44.0         #> [11] MatrixGenerics_1.10.0       matrixStats_0.63.0          #> [13] zellkonverter_1.8.0         #>  #> loaded via a namespace (and not attached): #>  [1] Rcpp_1.0.10            here_1.0.1             dir.expiry_1.6.0       #>  [4] lattice_0.20-45        png_0.1-8              rprojroot_2.0.3        #>  [7] digest_0.6.31          utf8_1.2.3             mime_0.12              #> [10] R6_2.5.1               evaluate_0.20          httr_1.4.4             #> [13] pillar_1.8.1           basilisk_1.10.2        zlibbioc_1.44.0        #> [16] rlang_1.0.6            curl_5.0.0             Matrix_1.5-1           #> [19] DT_0.27                reticulate_1.28        rmarkdown_2.20         #> [22] htmlwidgets_1.6.1      RCurl_1.98-1.10        shiny_1.7.4            #> [25] DelayedArray_0.24.0    compiler_4.2.2         httpuv_1.6.8           #> [28] xfun_0.37              pkgconfig_2.0.3        htmltools_0.5.4        #> [31] tidyselect_1.2.0       tibble_3.1.8           GenomeInfoDbData_1.2.9 #> [34] codetools_0.2-18       fansi_1.0.4            withr_2.5.0            #> [37] later_1.3.0            bitops_1.0-7           rjsoncons_1.0.0        #> [40] basilisk.utils_1.10.0  grid_4.2.2             jsonlite_1.8.4         #> [43] xtable_1.8-4           lifecycle_1.0.3        magrittr_2.0.3         #> [46] cli_3.6.0              XVector_0.38.0         renv_0.16.0            #> [49] promises_1.2.0.1       ellipsis_0.3.2         filelock_1.0.2         #> [52] generics_0.1.3         vctrs_0.5.2            tools_4.2.2            #> [55] glue_1.6.2             parallel_4.2.2         fastmap_1.1.0          #> [58] yaml_2.3.7             knitr_1.42"},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/cxg.html","id":null,"dir":"Reference","previous_headings":"","what":"Shiny application for discovering, viewing, and downloading\ncellxgene data — cxg","title":"Shiny application for discovering, viewing, and downloading\ncellxgene data — cxg","text":"Shiny application discovering, viewing, downloading cellxgene data","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/cxg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Shiny application for discovering, viewing, and downloading\ncellxgene data — cxg","text":"","code":"cxg(as = c(\"tibble\", \"sce\"))"},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/cxg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Shiny application for discovering, viewing, and downloading\ncellxgene data — cxg","text":"character(1) Return value quiting shiny application. \"tibble\" returns tibble describing selected datasets (including location disk downloaded file). \"sce\" returns list dataset files imported R SingleCellExperiment objects.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/cxg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Shiny application for discovering, viewing, and downloading\ncellxgene data — cxg","text":"cxg() returns either tibble describing datasets selected shiny application, list datasets imported R SingleCellExperiment objects.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/cxg.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Shiny application for discovering, viewing, and downloading\ncellxgene data — cxg","text":"","code":"if (FALSE) { cxg() }"},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/db.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve updated cellxgene database metadata — db","title":"Retrieve updated cellxgene database metadata — db","text":"Retrieve updated cellxgene database metadata","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/db.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve updated cellxgene database metadata — db","text":"","code":"db(overwrite = .db_online() && .db_first())"},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/db.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retrieve updated cellxgene database metadata — db","text":"overwrite logical(1) indicating whether database collections updated internet (default, internet available , interactive session, user requests update), read disk (assuming previous successful access internet).  overwrite = FALSE might useful reproducibility, testing, working environment restricted internet access.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/db.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retrieve updated cellxgene database metadata — db","text":"db() returns object class 'cellxgene_db', summarizing available collections, datasets, files.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/db.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Retrieve updated cellxgene database metadata — db","text":"database retrieved cellxgene data portal web site. 'collections' metadata retrieved call; metadata collection cached locally re-use.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/db.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Retrieve updated cellxgene database metadata — db","text":"","code":"db() #> cellxgene_db #> number of collections(): 145 #> number of datasets(): 841 #> number of files(): 3348"},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/facets.html","id":null,"dir":"Reference","previous_headings":"","what":"Facets available for querying cellxgene data — FACETS","title":"Facets available for querying cellxgene data — FACETS","text":"FACETS character vector common fields used subset cellxgene data. facets() used query cellxgene database current values one facets. facets_filter() provides convenient way filter facets based label ontology term.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/facets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Facets available for querying cellxgene data — FACETS","text":"","code":"FACETS  facets(cellxgene_db = db(), facets = FACETS)  facets_filter(facet, key = c(\"label\", \"ontology_term_id\"), value, exact = TRUE)"},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/facets.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Facets available for querying cellxgene data — FACETS","text":"FACETS object class character length 8.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/facets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Facets available for querying cellxgene data — FACETS","text":"cellxgene_db (optional) cellxgene_db object, returned db(). facets character() vector corersponding one facets FACETS. facet column containing faceted information, e.g., sex datasets(db). key character(1) identifying whether value label ontology_term_id. value character() value label ontology term filter . value may vector length(value) > 0 exact matchs (exact = TRUE, default), character(1) regular expression. exact logical(1) whether values match exactly (default, TRUE) regular expression (FALSE).","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/facets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Facets available for querying cellxgene data — FACETS","text":"facets() returns tibble columns facet, label, ontology_term_id, n, number times facet label used database. facets_filter() returns logical vector length equal length (number rows) facet, TRUE indicating value key present dataset.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/facets.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Facets available for querying cellxgene data — FACETS","text":"","code":"f <- facets()  ## levels of each facet f |>     dplyr::count(facet) #> # A tibble: 8 × 2 #>   facet                       n #>   <chr>                   <int> #> 1 assay                      34 #> 2 cell_type                 682 #> 3 development_stage         215 #> 4 disease                    80 #> 5 organism                    5 #> 6 self_reported_ethnicity    28 #> 7 sex                         3 #> 8 tissue                    302  ## same as facets(, facets = \"organism\") f |>     dplyr::filter(facet == \"organism\") #> # A tibble: 5 × 4 #>   facet    label                 ontology_term_id     n #>   <chr>    <chr>                 <chr>            <int> #> 1 organism Homo sapiens          NCBITaxon:9606     657 #> 2 organism Mus musculus          NCBITaxon:10090    188 #> 3 organism Callithrix jacchus    NCBITaxon:9483       4 #> 4 organism Sus scrofa domesticus NCBITaxon:9825       3 #> 5 organism Macaca mulatta        NCBITaxon:9544       2  db <- db() ds <- datasets(db)  ## datasets with African American females ds |>     dplyr::filter(         facets_filter(self_reported_ethnicity, \"label\", \"African American\"),         facets_filter(sex, \"label\", \"female\")     ) #> # A tibble: 45 × 26 #>    dataset_id                 collection_id donor_id assay  cell_count cell_type #>    <chr>                      <chr>         <list>   <list>      <int> <list>    #>  1 8693bc2c-d84f-450f-983a-d… bcb61471-2a4… <list>   <list>     304652 <list>    #>  2 37f30005-8a5c-4bdf-88aa-a… bcb61471-2a4… <list>   <list>     172847 <list>    #>  3 54914718-c0d3-4e17-9e06-d… bcb61471-2a4… <list>   <list>     107344 <list>    #>  4 39c0575c-5f9c-4009-bac0-6… 7d7cabfd-1d1… <list>   <list>     600929 <list>    #>  5 4c4dedb7-1f74-4be7-9916-2… b953c942-f5d… <list>   <list>      23197 <list>    #>  6 8716534a-4c1c-414c-aa98-4… b953c942-f5d… <list>   <list>      96129 <list>    #>  7 24205601-0780-4bf2-b1d9-0… c9706a92-0e5… <list>   <list>      31696 <list>    #>  8 a963dd1b-ee7e-42b3-8afe-0… a98b828a-622… <list>   <list>      48783 <list>    #>  9 b976e4cb-968a-4ee2-b11d-b… 436154da-bcf… <list>   <list>    1263676 <list>    #> 10 0899734f-df71-41a6-a1ea-c… a238e9fa-2bd… <list>   <list>       2541 <list>    #> # ℹ 35 more rows #> # ℹ 20 more variables: dataset_deployments <chr>, development_stage <list>, #> #   disease <list>, is_primary_data <chr>, is_valid <lgl>, #> #   mean_genes_per_cell <dbl>, name <chr>, organism <list>, #> #   processing_status <list>, published <lgl>, revision <int>, #> #   schema_version <chr>, self_reported_ethnicity <list>, sex <list>, #> #   suspension_type <list>, tissue <list>, tombstone <lgl>, …  ## datasets with non-European, known ethnicity facets(db, \"self_reported_ethnicity\") #> # A tibble: 28 × 4 #>    facet                   label                          ontology_term_id     n #>    <chr>                   <chr>                          <chr>            <int> #>  1 self_reported_ethnicity European                       HANCESTRO:0005     402 #>  2 self_reported_ethnicity unknown                        unknown            289 #>  3 self_reported_ethnicity na                             na                 190 #>  4 self_reported_ethnicity Asian                          HANCESTRO:0008     102 #>  5 self_reported_ethnicity African American               HANCESTRO:0568      54 #>  6 self_reported_ethnicity Hispanic or Latin American     HANCESTRO:0014      40 #>  7 self_reported_ethnicity African American or Afro-Cari… HANCESTRO:0016      26 #>  8 self_reported_ethnicity multiethnic                    multiethnic         25 #>  9 self_reported_ethnicity Greater Middle Eastern  (Midd… HANCESTRO:0015      22 #> 10 self_reported_ethnicity British                        HANCESTRO:0462      10 #> # ℹ 18 more rows ds |>     dplyr::filter(         !facets_filter(             self_reported_ethnicity, \"label\", c(\"European\", \"na\", \"unknown\")         )     ) #> # A tibble: 22 × 26 #>    dataset_id                 collection_id donor_id assay  cell_count cell_type #>    <chr>                      <chr>         <list>   <list>      <int> <list>    #>  1 a8c0b8af-0d67-4b93-ac2d-4… 9c8808ce-113… <list>   <list>       4355 <list>    #>  2 d374b984-a6e0-4d47-ba6d-e… 8e880741-bf9… <list>   <list>      17704 <list>    #>  3 e567706a-6f68-4789-ad14-2… 8e880741-bf9… <list>   <list>      25741 <list>    #>  4 72ad5ea4-1cbe-4862-a03e-f… 8e880741-bf9… <list>   <list>      17777 <list>    #>  5 0f1098a9-35d4-427f-9040-7… 8e880741-bf9… <list>   <list>      23857 <list>    #>  6 4116ae06-9e4c-4f8d-9b26-4… 9d63fcf1-5ca… <list>   <list>       3596 <list>    #>  7 57d85cba-528e-45e0-9817-e… 9d63fcf1-5ca… <list>   <list>      10734 <list>    #>  8 119ce3e3-c438-4bae-9a45-2… 9d63fcf1-5ca… <list>   <list>       4880 <list>    #>  9 84fa33d5-8089-417e-9efe-e… 9d63fcf1-5ca… <list>   <list>       3851 <list>    #> 10 ea0ec660-2262-46d8-b785-2… 9d63fcf1-5ca… <list>   <list>      45528 <list>    #> # ℹ 12 more rows #> # ℹ 20 more variables: dataset_deployments <chr>, development_stage <list>, #> #   disease <list>, is_primary_data <chr>, is_valid <lgl>, #> #   mean_genes_per_cell <dbl>, name <chr>, organism <list>, #> #   processing_status <list>, published <lgl>, revision <int>, #> #   schema_version <chr>, self_reported_ethnicity <list>, sex <list>, #> #   suspension_type <list>, tissue <list>, tombstone <lgl>, …"},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/query.html","id":null,"dir":"Reference","previous_headings":"","what":"Query cellxgene collections, datasets, and files — collections","title":"Query cellxgene collections, datasets, and files — collections","text":"files_download() retrieves one cellxgene files cache local system. links(), authors() publisher_metadata() helper functions extract 'nested' information collections.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/query.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Query cellxgene collections, datasets, and files — collections","text":"","code":"collections(cellxgene_db = db())  datasets(cellxgene_db = db())  datasets_visualize(tbl)  files(cellxgene_db = db())  files_download(tbl, dry.run = TRUE, cache.path = .cellxgene_cache_path())  links(cellxgene_db = db())  authors(cellxgene_db = db())  publisher_metadata(cellxgene_db = db())"},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/query.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Query cellxgene collections, datasets, and files — collections","text":"cellxgene_db optional 'cellxgene_db' object, returned db(). tbl tibble() typically derived datasets(db) files(db) containing columns dataset_id (datasets_visualize()), columns dataset_id, file_id, filetype (files_download()). dry.run logical(1) indicating whether (often large) file(s) tbl downloaded local cache. Files downloaded dry.run = TRUE (default). cache.path character(1) directory cache downloaded files. directory must already exist. default tools::R_user_dir(\"cellxgenedp\", \"cache\"), package-specific path user home directory.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/query.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Query cellxgene collections, datasets, and files — collections","text":"function returns tibble describing corresponding component database. files_download() returns character() vector paths local files. links() returns tibble external links associated collection. Common links includ DOI, raw data / data sources, lab websites. authors() returns tibble authors associated collection. publisher_metadata() returns tibble publisher metadata (journal, publicate date, doi) associated collection.","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/reference/query.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Query cellxgene collections, datasets, and files — collections","text":"","code":"db <- db()  collections(db) #> # A tibble: 145 × 15 #>    collection_id   access_type consortia contact_email contact_name curator_name #>    <chr>           <chr>       <list>    <chr>         <chr>        <chr>        #>  1 2b02dff7-e427-… READ        <lgl [1]> miriam.merad… Miriam Merad Batuhan Cak… #>  2 03cdc7f4-bd08-… READ        <lgl [1]> tien.peng@uc… Tien Peng    Jason Hilton #>  3 a72afd53-ab92-… READ        <lgl [1]> cblish@stanf… Catherine A… Jennifer Yu… #>  4 e9eec7f5-8519-… READ        <list>    mrc38@cam.ac… Menna R Cla… Batuhan Cak… #>  5 4796c91c-9d8f-… READ        <lgl [1]> vazquezi@msk… Ignacio Váz… Jason Hilton #>  6 bcb61471-2a44-… READ        <list>    info@kpmp.org KPMP         Jennifer Yu… #>  7 13d1c580-4b17-… READ        <list>    my4@sanger.a… Matthew You… Jason Hilton #>  8 5e469121-c203-… READ        <list>    biren@ucsd.e… Bing Ren     Jennifer Yu… #>  9 9132fae8-bdfe-… READ        <lgl [1]> zhuang@chemi… Xiaowei Zhu… Jennifer Yu… #> 10 0a77d4c0-d5d0-… READ        <list>    fabian.theis… Fabian Theis Jennifer Yu… #> # ℹ 135 more rows #> # ℹ 9 more variables: data_submission_policy_version <chr>, description <chr>, #> #   links <list>, name <chr>, publisher_metadata <list>, visibility <chr>, #> #   created_at <date>, published_at <date>, updated_at <date>  collections(db) |>     dplyr::glimpse() #> Rows: 145 #> Columns: 15 #> $ collection_id                  <chr> \"2b02dff7-e427-4cdc-96fb-c0f354c099aa\",… #> $ access_type                    <chr> \"READ\", \"READ\", \"READ\", \"READ\", \"READ\",… #> $ consortia                      <list> NA, NA, NA, [\"Wellcome HCA Strategic S… #> $ contact_email                  <chr> \"miriam.merad@mssm.edu\", \"tien.peng@ucs… #> $ contact_name                   <chr> \"Miriam Merad\", \"Tien Peng\", \"Catherine… #> $ curator_name                   <chr> \"Batuhan Cakir\", \"Jason Hilton\", \"Jenni… #> $ data_submission_policy_version <chr> \"1.0\", \"1.0\", \"1.0\", \"1.0\", \"1.0\", \"1.0… #> $ description                    <chr> \"Clinical benefits of cytokine blockade… #> $ links                          <list> [[\"\", \"RAW_DATA\", \"https://www.ncbi.nl… #> $ name                           <chr> \"Single-Cell Analysis of Crohn’s Diseas… #> $ publisher_metadata             <list> [[[\"Martin\", \"Jerome C.\"], [\"Chang\", \"… #> $ visibility                     <chr> \"PUBLIC\", \"PUBLIC\", \"PUBLIC\", \"PUBLIC\",… #> $ created_at                     <date> 2023-03-21, 2023-06-22, 2023-03-21, 20… #> $ published_at                   <date> 2022-04-26, 2023-01-28, 2020-09-28, 20… #> $ updated_at                     <date> 2023-03-21, 2023-06-22, 2023-03-21, 20…  datasets(db) |>     dplyr::glimpse() #> Rows: 841 #> Columns: 26 #> $ dataset_id              <chr> \"7a637398-175f-4cf2-b06a-6a494503196b\", \"9aca7… #> $ collection_id           <chr> \"2b02dff7-e427-4cdc-96fb-c0f354c099aa\", \"03cdc… #> $ donor_id                <list> [\"pat.5\", \"pat.6\", \"pat.7\", \"pat.8\", \"pat.10\"… #> $ assay                   <list> [[\"10x 3' v1\", \"EFO:0009901\"], [\"10x 3' v2\", … #> $ cell_count              <int> 32458, 35699, 18386, 3662, 44721, 130908, 2116… #> $ cell_type               <list> [[\"B cell\", \"CL:0000236\"], [\"alpha-beta T cel… #> $ dataset_deployments     <chr> \"https://cellxgene.cziscience.com/e/36c867a7-b… #> $ development_stage       <list> [[\"human early adulthood stage\", \"HsapDv:0000… #> $ disease                 <list> [[\"Crohn ileitis\", \"MONDO:0000709\"]], [[\"norm… #> $ is_primary_data         <chr> \"PRIMARY\", \"PRIMARY\", \"PRIMARY\", \"SECONDARY\", … #> $ is_valid                <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE… #> $ mean_genes_per_cell     <dbl> 763.68282, 1922.05370, 2918.85603, 3945.77171,… #> $ name                    <chr> \"Ileum\", \"immune cells\", \"non-immune cells\", \"… #> $ organism                <list> [[\"Homo sapiens\", \"NCBITaxon:9606\"]], [[\"Homo… #> $ processing_status       <list> [0, \"UPLOADED\", \"7a637398-175f-4cf2-b06a-6a49… #> $ published               <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE… #> $ revision                <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0… #> $ schema_version          <chr> \"3.0.0\", \"3.0.0\", \"3.0.0\", \"3.0.0\", \"3.0.0\", \"… #> $ self_reported_ethnicity <list> [[\"unknown\", \"unknown\"]], [[\"European\", \"HANC… #> $ sex                     <list> [[\"unknown\", \"unknown\"]], [[\"female\", \"PATO:0… #> $ suspension_type         <list> [\"cell\"], [\"cell\"], [\"cell\"], [\"cell\"], [\"cel… #> $ tissue                  <list> [[\"ileum\", \"UBERON:0002116\"]], [[\"alveolus of… #> $ tombstone               <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALS… #> $ created_at              <date> 2022-04-13, 2022-09-14, 2023-06-22, 2023-06-2… #> $ published_at            <date> 2022-04-26, 2023-01-28, 2023-01-28, 2023-01-2… #> $ updated_at              <date> 2022-04-13, 2022-09-14, 2023-06-22, 2023-06-2…  # \\donttest{ ## visualize the first dataset datasets(db) |>     dplyr::slice(1) |>     datasets_visualize() # } files(db) |>     dplyr::glimpse() #> Rows: 3,348 #> Columns: 8 #> $ file_id        <chr> \"e9b93ee2-37a7-454d-b2ea-ee369e979386\", \"78e930cd-3b37-… #> $ dataset_id     <chr> \"7a637398-175f-4cf2-b06a-6a494503196b\", \"7a637398-175f-… #> $ filename       <chr> \"\", \"local.rds\", \"raw.h5ad\", \"local.h5ad\", \"raw.h5ad\", … #> $ filetype       <chr> \"CXG\", \"RDS\", \"RAW_H5AD\", \"H5AD\", \"RAW_H5AD\", \"H5AD\", \"… #> $ s3_uri         <chr> \"s3://hosted-cellxgene-prod/e9b93ee2-37a7-454d-b2ea-ee3… #> $ user_submitted <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, T… #> $ created_at     <date> 1970-01-01, 1970-01-01, 1970-01-01, 1970-01-01, 1970-0… #> $ updated_at     <date> 1970-01-01, 1970-01-01, 1970-01-01, 1970-01-01, 1970-0…  if (FALSE) { files(db) |>     dplyr::slice(1) |>     files_download(dry.run = FALSE) }  ## common links to external data links(db) |>     dplyr::count(link_type) #> # A tibble: 6 × 2 #>   link_type       n #>   <chr>       <int> #> 1 DATA_SOURCE    40 #> 2 DOI           138 #> 3 LAB_WEBSITE    33 #> 4 OTHER         254 #> 5 PROTOCOL       40 #> 6 RAW_DATA      193  ## authors per collection authors() |>     dplyr::count(collection_id, sort = TRUE) #> # A tibble: 138 × 2 #>    collection_id                            n #>    <chr>                                <int> #>  1 e5f58829-1a66-40b5-a624-9046778e74f5   221 #>  2 8f126edf-5405-4731-8374-b5ce11f53e82   205 #>  3 4f586cb6-972b-4ef7-a4ef-3c3800a3c004   147 #>  4 0b9d8a04-bb9d-44da-aa27-705bb65b54eb   135 #>  5 367d95c0-0eb0-4dae-8276-9407239421ee   106 #>  6 6f6d381a-7701-4781-935c-db10d30de293    98 #>  7 1ca90a2d-2943-483d-b678-b809bf464c30    94 #>  8 0a839c4b-10d0-4d64-9272-684c49a2c8ba    90 #>  9 ae1420fe-6630-46ed-8b3d-cc6056a66467    83 #> 10 ddfad306-714d-4cc0-9985-d9072820c530    69 #> # ℹ 128 more rows  publisher_metadata() |>     dplyr::glimpse() #> Rows: 138 #> Columns: 9 #> $ collection_id   <chr> \"2b02dff7-e427-4cdc-96fb-c0f354c099aa\", \"03cdc7f4-bd08… #> $ name            <chr> \"Single-Cell Analysis of Crohn’s Disease Lesions Ident… #> $ is_preprint     <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, FALSE,… #> $ journal         <chr> \"Cell\", \"Immunity\", \"Nat Med\", \"Current Opinion in Imm… #> $ published_at    <date> 2019-09-01, 2023-02-01, 2020-07-01, 2022-06-01, 2022-… #> $ published_year  <int> 2019, 2023, 2020, 2022, 2022, 2021, 2021, 2021, 2020, … #> $ published_month <int> 9, 2, 7, 6, 12, 7, 12, 10, 6, 9, 1, 10, 9, 9, 11, 5, 1… #> $ published_day   <int> 1, 1, 1, 1, 14, 29, 1, 7, 5, 1, 1, 7, 27, 6, 1, 13, 1,… #> $ doi             <chr> \"https://doi.org/10.1016/j.cell.2019.08.008\", \"https:/…"},{"path":"https://mtmorgan.github.io/cellxgenedp/news/index.html","id":"cellxgenedp-14","dir":"Changelog","previous_headings":"","what":"cellxgenedp 1.4","title":"cellxgenedp 1.4","text":"SIGNIFICANT USER-VISIBLE CHANGES (v 1.3.3) add publisher_metadata(), authors(), links() make access nested ‘collections()’ data straight-forward","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/news/index.html","id":"cellxgenedp-12","dir":"Changelog","previous_headings":"","what":"cellxgenedp 1.2","title":"cellxgenedp 1.2","text":"SIGNIFICANT USER-VISIBLE CHANGES (v. 1.1.4) allow custom files_download() cache. Thanks @stemangiola, https://github.com/mtmorgan/cellxgenedp/pull/9 (v. 1.1.6) datasets ethnicity field renamed self_reported_ethnicity (v. 1.1.7) use zellkonverter’s basilisk-based Python parser read H5AD files vignette, see https://github.com/theislab/zellkonverter/issues/78 (v. 1.1.2) reset cache build machines weekly (v. 1.1.6) use {rjsoncons} CRAN package queries, rather local implementation. Thanks @LiNk-NY, https://github.com/mtmorgan/cellxgenedp/pull/12","code":""},{"path":"https://mtmorgan.github.io/cellxgenedp/news/index.html","id":"cellxgenedp-007","dir":"Changelog","previous_headings":"","what":"cellxgenedp 0.0.7","title":"cellxgenedp 0.0.7","text":"(v. 0.0.7) make errors local cache update accessible; see https://github.com/mtmorgan/cellxgenedp/issues/1","code":""}]
